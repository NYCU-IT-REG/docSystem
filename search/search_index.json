{"config":{"lang":["zh","en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"404/","title":"404 \u2014 \u627e\u4e0d\u5230\u9801\u9762","text":"<p>\u62b1\u6b49\uff0c\u60a8\u6240\u8acb\u6c42\u7684\u9801\u9762\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u79fb\u52d5\u3002</p> <p>\u8acb\u6aa2\u67e5\u7db2\u5740\u662f\u5426\u6b63\u78ba\uff0c\u6216\u56de\u5230\u9996\u9801\u7e7c\u7e8c\u700f\u89bd\uff1a</p> <p>\u8fd4\u56de\u9996\u9801</p> <p>\u5982\u9700\u82f1\u6587\u7248\u672c\uff0c\u8acb\u524d\u5f80 English\u3002</p>"},{"location":"","title":"\u6b61\u8fce\u4f86\u5230\u967d\u660e\u4ea4\u5927\u8cc7\u8a0a\u6280\u8853\u670d\u52d9\u4e2d\u5fc3 DocHub","text":"<p>\u9019\u662f\u967d\u660e\u4ea4\u901a\u5927\u5b78\u8cc7\u8a0a\u6280\u8853\u670d\u52d9\u4e2d\u5fc3\u7684\u6587\u4ef6\u4e2d\u5fc3\uff0c\u63d0\u4f9b\u5404\u7a2e\u670d\u52d9\u6307\u5357\u3001\u6280\u8853\u6587\u4ef6\u8207\u5e38\u898b\u554f\u984c\u89e3\u7b54\u3002</p>"},{"location":"#_1","title":"\u5feb\u901f\u5c0e\u89bd","text":""},{"location":"#_2","title":"\ud83d\udcda \u670d\u52d9\u6307\u5357","text":"<p>\u4e86\u89e3\u6211\u5011\u63d0\u4f9b\u7684\u5404\u9805\u670d\u52d9\u8207\u4f7f\u7528\u65b9\u5f0f\u3002</p>"},{"location":"#_3","title":"\ud83d\udd27 \u6280\u8853\u6587\u4ef6","text":"<p>\u6df1\u5165\u7684\u6280\u8853\u8cc7\u6599\u8207\u5be6\u4f5c\u6307\u5357\u3002</p>"},{"location":"#_4","title":"\u2753 \u5e38\u898b\u554f\u984c","text":"<p>\u5e38\u898b\u554f\u984c\u8207\u89e3\u6c7a\u65b9\u6848\u3002</p>"},{"location":"#_5","title":"\ud83d\udc65 \u95dc\u65bc\u6211\u5011","text":"<p>\u8a8d\u8b58\u8cc7\u8a0a\u6280\u8853\u670d\u52d9\u4e2d\u5fc3\u5718\u968a\u3002</p>"},{"location":"#_6","title":"\u806f\u7d61\u6211\u5011","text":"<p>\u5982\u6709\u4efb\u4f55\u554f\u984c\u6216\u5efa\u8b70\uff0c\u6b61\u8fce\u900f\u904e\u4ee5\u4e0b\u65b9\u5f0f\u806f\u7d61\u6211\u5011\uff1a</p> <ul> <li>\ud83d\udce7 Email: support@it.nycu.edu.tw</li> <li>\ud83c\udf10 \u7db2\u7ad9: https://it.nycu.edu.tw</li> </ul>"},{"location":"accessibility/","title":"\u7db2\u7ad9\u7121\u969c\u7919\u8072\u660e","text":"<p>\u672c\u7db2\u7ad9\u4f9d\u64da\u300c\u7121\u969c\u7919\u7db2\u9801\u958b\u767c\u898f\u7bc4\u300d\uff08Web Content Accessibility Guidelines, WCAG 2.1\uff09\u7b49\u7d1a AA \u6a19\u6e96\u9032\u884c\u8a2d\u8a08\u8207\u958b\u767c\uff0c\u4ee5\u78ba\u4fdd\u6240\u6709\u4f7f\u7528\u8005\u90fd\u80fd\u5e73\u7b49\u5730\u7372\u53d6\u8cc7\u8a0a\u3002</p>"},{"location":"accessibility/#_2","title":"\u7121\u969c\u7919\u529f\u80fd","text":""},{"location":"accessibility/#1","title":"1. \u9375\u76e4\u5c0e\u822a\u652f\u63f4","text":"<p>\u672c\u7db2\u7ad9\u5b8c\u5168\u652f\u63f4\u9375\u76e4\u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5feb\u901f\u9375\uff1a</p> <ul> <li>Tab \u9375\uff1a\u79fb\u52d5\u5230\u4e0b\u4e00\u500b\u53ef\u64cd\u4f5c\u5143\u7d20</li> <li>Shift + Tab\uff1a\u79fb\u52d5\u5230\u4e0a\u4e00\u500b\u53ef\u64cd\u4f5c\u5143\u7d20</li> <li>Enter \u9375\uff1a\u9078\u64c7\u6216\u555f\u52d5\u76ee\u524d\u7684\u5143\u7d20</li> <li>\u7a7a\u767d\u9375\uff1a\u6372\u52d5\u9801\u9762\u6216\u52fe\u9078\u6838\u53d6\u65b9\u584a</li> <li>\u65b9\u5411\u9375\uff1a\u5728\u9078\u55ae\u6216\u6e05\u55ae\u4e2d\u79fb\u52d5</li> </ul>"},{"location":"accessibility/#2","title":"2. \u8df3\u904e\u5340\u584a","text":"<p>\u7db2\u9801\u63d0\u4f9b\u300c\u8df3\u81f3\u4e3b\u8981\u5167\u5bb9\u300d\u9023\u7d50\uff0c\u8b93\u4f7f\u7528\u9375\u76e4\u6216\u87a2\u5e55\u95b1\u8b80\u5668\u7684\u4f7f\u7528\u8005\u80fd\u5feb\u901f\u8df3\u904e\u5c0e\u822a\u5340\u57df\uff0c\u76f4\u63a5\u9032\u5165\u4e3b\u8981\u5167\u5bb9\u3002</p>"},{"location":"accessibility/#3","title":"3. \u66ff\u4ee3\u6587\u5b57","text":"<p>\u6240\u6709\u5716\u7247\u3001\u5716\u793a\u548c\u591a\u5a92\u9ad4\u5167\u5bb9\u90fd\u63d0\u4f9b\u9069\u7576\u7684\u66ff\u4ee3\u6587\u5b57\u63cf\u8ff0\uff0c\u78ba\u4fdd\u4f7f\u7528\u87a2\u5e55\u95b1\u8b80\u5668\u7684\u4f7f\u7528\u8005\u80fd\u7406\u89e3\u5167\u5bb9\u3002</p>"},{"location":"accessibility/#4","title":"4. \u6a19\u984c\u7d50\u69cb","text":"<p>\u7db2\u9801\u4f7f\u7528\u9069\u7576\u7684\u6a19\u984c\u5c64\u7d1a\uff08H1 \u81f3 H6\uff09\uff0c\u5efa\u7acb\u6e05\u695a\u7684\u5167\u5bb9\u968e\u5c64\uff0c\u65b9\u4fbf\u5feb\u901f\u700f\u89bd\u8207\u5c0e\u822a\u3002</p>"},{"location":"accessibility/#5","title":"5. \u8272\u5f69\u5c0d\u6bd4","text":"<p>\u6587\u5b57\u8207\u80cc\u666f\u7684\u5c0d\u6bd4\u5ea6\u7b26\u5408 WCAG 2.1 AA \u6a19\u6e96\uff1a - \u4e00\u822c\u6587\u5b57\uff1a\u81f3\u5c11 4.5:1 - \u5927\u578b\u6587\u5b57\uff1a\u81f3\u5c11 3:1 - \u5716\u5f62\u5143\u7d20\uff1a\u81f3\u5c11 3:1</p>"},{"location":"accessibility/#6","title":"6. \u6df1\u8272\u6a21\u5f0f","text":"<p>\u63d0\u4f9b\u6df1\u8272\u6a21\u5f0f\u5207\u63db\u529f\u80fd\uff0c\u8b93\u4f7f\u7528\u8005\u4f9d\u500b\u4eba\u9700\u6c42\u9078\u64c7\u8212\u9069\u7684\u95b1\u8b80\u6a21\u5f0f\u3002</p>"},{"location":"accessibility/#7","title":"7. \u6587\u5b57\u7e2e\u653e","text":"<p>\u7db2\u7ad9\u4f7f\u7528\u76f8\u5c0d\u55ae\u4f4d\u8a2d\u8a08\uff0c\u652f\u63f4\u700f\u89bd\u5668\u7684\u6587\u5b57\u7e2e\u653e\u529f\u80fd\uff08\u6700\u9ad8\u81f3 200%\uff09\uff0c\u4e0d\u6703\u5f71\u97ff\u7248\u9762\u914d\u7f6e\u6216\u529f\u80fd\u3002</p>"},{"location":"accessibility/#8","title":"8. \u8868\u55ae\u6a19\u7c64","text":"<p>\u6240\u6709\u8868\u55ae\u6b04\u4f4d\u90fd\u6709\u660e\u78ba\u7684\u6a19\u7c64\u8aaa\u660e\uff0c\u4e26\u5728\u5fc5\u8981\u6642\u63d0\u4f9b\u984d\u5916\u7684\u8f14\u52a9\u8aaa\u660e\u3002</p>"},{"location":"accessibility/#9","title":"9. \u932f\u8aa4\u8a0a\u606f","text":"<p>\u8868\u55ae\u9a57\u8b49\u932f\u8aa4\u6703\u63d0\u4f9b\u6e05\u695a\u7684\u932f\u8aa4\u8a0a\u606f\uff0c\u8aaa\u660e\u932f\u8aa4\u539f\u56e0\u8207\u4fee\u6b63\u65b9\u6cd5\u3002</p>"},{"location":"accessibility/#10","title":"10. \u8a9e\u8a00\u6a19\u793a","text":"<p>\u7db2\u9801\u6b63\u78ba\u6a19\u793a\u4e3b\u8981\u8a9e\u8a00\uff08\u7e41\u9ad4\u4e2d\u6587\u6216\u82f1\u6587\uff09\uff0c\u4e26\u652f\u63f4\u591a\u570b\u8a9e\u8a00\u5207\u63db\u3002</p>"},{"location":"accessibility/#_3","title":"\u87a2\u5e55\u95b1\u8b80\u5668\u76f8\u5bb9\u6027","text":"<p>\u672c\u7db2\u7ad9\u7d93\u904e\u4ee5\u4e0b\u87a2\u5e55\u95b1\u8b80\u5668\u6e2c\u8a66\uff1a</p> <ul> <li>NVDA\uff08Windows\uff09</li> <li>JAWS\uff08Windows\uff09</li> <li>VoiceOver\uff08macOS/iOS\uff09</li> <li>TalkBack\uff08Android\uff09</li> </ul>"},{"location":"accessibility/#_4","title":"\u6e1b\u5c11\u52d5\u756b","text":"<p>\u672c\u7db2\u7ad9\u9075\u5faa\u4f7f\u7528\u8005\u7684\u7cfb\u7d71\u504f\u597d\u8a2d\u5b9a\uff0c\u7576\u5075\u6e2c\u5230\u300c\u6e1b\u5c11\u52d5\u756b\u300d\u8a2d\u5b9a\u6642\uff0c\u6703\u81ea\u52d5\u6e1b\u5c11\u6216\u505c\u7528\u52d5\u756b\u6548\u679c\u3002</p>"},{"location":"accessibility/#_5","title":"\u9375\u76e4\u7126\u9ede\u6307\u793a","text":"<p>\u6240\u6709\u53ef\u4e92\u52d5\u5143\u7d20\u5728\u7372\u5f97\u9375\u76e4\u7126\u9ede\u6642\uff0c\u90fd\u6703\u986f\u793a\u6e05\u695a\u7684\u8996\u89ba\u6307\u793a\uff0c\u78ba\u4fdd\u4f7f\u7528\u8005\u77e5\u9053\u76ee\u524d\u6240\u5728\u4f4d\u7f6e\u3002</p>"},{"location":"accessibility/#_6","title":"\u7121\u969c\u7919\u554f\u984c\u56de\u5831","text":"<p>\u5982\u679c\u60a8\u5728\u4f7f\u7528\u672c\u7db2\u7ad9\u6642\u9047\u5230\u4efb\u4f55\u7121\u969c\u7919\u76f8\u95dc\u554f\u984c\uff0c\u6216\u6709\u6539\u5584\u5efa\u8b70\uff0c\u6b61\u8fce\u8207\u6211\u5011\u806f\u7e6b\uff1a</p> <ul> <li>\u96fb\u5b50\u90f5\u4ef6\uff1asupport@it.nycu.edu.tw</li> <li>\u96fb\u8a71\uff1a(03) 571-2121</li> </ul> <p>\u6211\u5011\u5c07\u76e1\u5feb\u8655\u7406\u60a8\u7684\u56de\u5831\u4e26\u6301\u7e8c\u6539\u5584\u7db2\u7ad9\u7684\u7121\u969c\u7919\u6027\u3002</p>"},{"location":"accessibility/#_7","title":"\u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>\u570b\u5bb6\u901a\u8a0a\u50b3\u64ad\u59d4\u54e1\u6703 - \u7121\u969c\u7919\u7db2\u8def\u7a7a\u9593\u670d\u52d9\u7db2</li> <li>Web Content Accessibility Guidelines (WCAG) 2.1</li> <li>\u7121\u969c\u7919\u7db2\u9801\u958b\u767c\u898f\u7bc4</li> </ul>"},{"location":"accessibility/#_8","title":"\u6700\u5f8c\u66f4\u65b0\u65e5\u671f","text":"<p>\u672c\u8072\u660e\u6700\u5f8c\u66f4\u65b0\u65e5\u671f\uff1a2025 \u5e74 1 \u6708</p> <p>\u627f\u8afe</p> <p>\u570b\u7acb\u967d\u660e\u4ea4\u901a\u5927\u5b78\u8cc7\u8a0a\u6280\u8853\u670d\u52d9\u4e2d\u5fc3\u81f4\u529b\u65bc\u78ba\u4fdd\u6578\u4f4d\u5167\u5bb9\u7684\u53ef\u53ca\u6027\uff0c\u6211\u5011\u5c07\u6301\u7e8c\u76e3\u63a7\u4e26\u6539\u5584\u7db2\u7ad9\u7684\u7121\u969c\u7919\u529f\u80fd\uff0c\u70ba\u6240\u6709\u4f7f\u7528\u8005\u63d0\u4f9b\u5e73\u7b49\u7684\u8cc7\u8a0a\u5b58\u53d6\u6a5f\u6703\u3002</p>"},{"location":"hpc/","title":"HPC \u9ad8\u901f\u904b\u7b97\u5e73\u53f0\u670d\u52d9\u8aaa\u660e","text":""},{"location":"hpc/#_1","title":"\u670d\u52d9\u8aaa\u660e","text":"<ul> <li>\u70ba\u63a8\u52d5\u6821\u5167\u5404\u7814\u7a76\u5718\u968a\u4f7f\u7528\u8cc7\u8a0a\u4e2d\u5fc3\u5efa\u7f6e\u4e4b HPC \u9ad8\u901f\u904b\u7b97\u5e73\u53f0\uff0c\u5efa\u7acb\u5b89\u5168\u4e14\u53ef\u4fe1\u8cf4\u4e4b\u904b\u7b97\u670d\u52d9\uff0c\u5354\u52a9\u7814\u7a76\u5718\u968a\u9032\u884c AI \u8207\u9ad8\u6548\u80fd\u904b\u7b97\u76f8\u95dc\u7814\u7a76\u3002</li> <li>\u5e73\u53f0\u76ee\u524d\u6709 5 \u5ea7 Nvidia DGX \u4f3a\u670d\u5668\uff1a\u5169\u5ea7\u914d\u5099 8 \u7247 H100 GPU\uff0c\u4e09\u5ea7\u914d\u5099 8 \u7247 H200 GPU\u3002</li> <li>\u63d0\u4f9b\u7368\u4f54\u5f0f\u53ca\u4f47\u5217\u5f0f GPU \u670d\u52d9\uff0c\u6eff\u8db3\u4e0d\u540c\u7814\u7a76\u9700\u6c42\u8207\u6392\u7a0b\u6a21\u5f0f\u3002</li> </ul>"},{"location":"hpc/#_2","title":"\u5e73\u53f0\u898f\u683c","text":"GPU \u578b\u865f \u985e\u578b GPU \u6838\u5fc3\u6578 \u5716\u5f62\u8a18\u61b6\u9ad4 H100 \u6574\u5f35 80GB H200 \u6574\u5f35 7 144GB H200 MIG-1g.18gb 1 18GB H200 MIG-2g.35gb 2 35GB <ul> <li>\u52a0\u503c\u670d\u52d9\uff1aHPC \u5132\u5b58\u88dd\u7f6e\u63d0\u4f9b 1 TB \u514d\u8cbb\u7a7a\u9593\uff1b\u8d85\u904e 1 TB \u5f8c\uff0c\u6bcf GB \u6536\u8cbb 2 \u5143\u3002</li> </ul>"},{"location":"hpc/#_3","title":"\u670d\u52d9\u5c0d\u8c61","text":"<ul> <li>\u6821\u5167\u7de8\u5236\u5167\u4e4b\u6559\u5e2b\u8207\u7814\u7a76\u54e1\u7686\u53ef\u7533\u8acb\uff1b\u6709\u95dc\u5176\u4ed6\u8eab\u5206\u6216\u5408\u4f5c\u6848\u4e4b\u4f7f\u7528\u65b9\u5f0f\u8acb\u6d3d\u8cc7\u8a0a\u4e2d\u5fc3\u6216\u4f9d\u516c\u544a\u898f\u5b9a\u8fa6\u7406\u3002</li> </ul>"},{"location":"hpc/#_4","title":"\u7533\u8acb\u65b9\u5f0f\u8207\u8cbb\u7528","text":"<ul> <li>\u7533\u8acb\u8acb\u53c3\u8003\u8cc7\u8a0a\u4e2d\u5fc3\u4e4b\u6536\u8cbb\u6a19\u6e96\u9801\u9762\u3002</li> <li>\u65b0\u7533\u8acb\u8acb\u81f3 HPC \u7533\u8acb\u7cfb\u7d71\uff08https://hpcreg.nycu.edu.tw/\uff09\u4f7f\u7528\u300cHPC \u65b0\u7533\u8acb\u300d\u529f\u80fd\u63d0\u4ea4\u3002\u958b\u901a\u901a\u5e38\u65bc 3 \u500b\u5de5\u4f5c\u5929\u5167\u5b8c\u6210\uff08\u82e5\u4e3b\u6301\u4eba\u672a\u7c3d\u6838\uff0c\u4ecd\u6703\u5148\u66ab\u6642\u958b\u901a\uff09\uff0c\u4e3b\u6301\u4eba\u9700\u5728 7 \u500b\u5de5\u4f5c\u5929\u5167\u5b8c\u6210\u7c3d\u6838\uff0c\u5426\u5247\u5e33\u865f\u53ef\u80fd\u505c\u7528\u4e26\u8a08\u5165\u8cbb\u7528\u3002</li> <li>\u7368\u4f54\u5f0f GPU \u670d\u52d9\u4ee5\u5929\u70ba\u55ae\u4f4d\u7533\u8acb\uff0c\u6700\u5c11\u4ee5 7 \u5929\u70ba\u55ae\u4f4d\u7533\u8acb\uff1b\u53ef\u4e00\u6b21\u7533\u8acb\u591a\u500b\u55ae\u4f4d\u3002</li> </ul>"},{"location":"hpc/#_5","title":"\u8a08\u8cbb\u8207\u4f7f\u7528\u898f\u7bc4\u91cd\u9ede","text":"<ul> <li>GPU \u4f7f\u7528\u7686\u70ba\u5148\u4f7f\u7528\u5f8c\u4ed8\u8cbb\uff0c\u7cfb\u7d71\u6bcf\u6708\u5bc4\u9001\u7e73\u8cbb\u901a\u77e5\u55ae\uff0c\u8acb\u65bc\u7576\u6708\u5e95\u524d\u5b8c\u6210\u7e73\u8cbb\uff1b\u903e\u671f\u4e00\u5468\u82e5\u4ecd\u672a\u7e73\u8cbb\u5c07\u505c\u6b62\u5e33\u865f\u767b\u5165\uff0c\u4e00\u500b\u6708\u5f8c\u53ef\u80fd\u522a\u9664\u5e33\u865f\u8207\u8cc7\u6599\u3002</li> <li>\u4f47\u5217\u5f0f\u670d\u52d9\u6709\u6700\u4f4e\u8cc7\u6e90\u4f7f\u7528\u91cf\u898f\u5b9a\uff08\u4f8b\u5982\u6bcf\u6708\u6700\u4f4e GPU \u5c0f\u6642\u6578\uff0c\u7cfb\u7d71\u6703\u6bcf\u6708\u7d50\u7b97\u4e26\u4f9d\u4e0d\u5230\u9580\u6abb\u63a1\u53d6\u5f8c\u7e8c\u8655\u7406\uff09\uff0c\u8acb\u7559\u610f\u5b98\u65b9\u516c\u544a\u3002</li> <li>\u4f7f\u7528\u8005\u9808\u9075\u5b88\u6821\u5167\u8cc7\u5b89\u8207\u667a\u6167\u8ca1\u7522\u6b0a\u76f8\u95dc\u898f\u5b9a\uff1b\u82e5\u767c\u751f\u91cd\u5927\u8cc7\u5b89\u4e8b\u4ef6\u6216\u898f\u7bc4\u9055\u53cd\uff0c\u4e2d\u5fc3\u5f97\u66ab\u505c\u8a72\u5e33\u865f\u670d\u52d9\u3002 \u5e73\u53f0\u4e0d\u8ca0\u8cac\u4f7f\u7528\u8005\u8cc7\u6599\u5099\u4efd\uff0c\u4f7f\u7528\u8005\u9700\u81ea\u884c\u5099\u4efd\u91cd\u8981\u8cc7\u6599\u3002</li> </ul>"},{"location":"hpc/#_6","title":"\u4f7f\u7528\u6ce8\u610f\u4e8b\u9805","text":"<ul> <li>\u5e33\u865f\u5b58\u53d6\u53d7 IP \u9650\u5236\uff0c\u4f9d\u8cc7\u5b89\u898f\u7bc4\u6bcf\u500b\u5e33\u865f\u53ef\u8a2d\u5b9a\u5169\u7d44\u53ef\u5b58\u53d6 IP\u3002</li> <li>\u70ba\u9f13\u52f5\u7814\u7a76\u5718\u968a\uff0c\u9996\u6b21\u7533\u8acb\u7b2c\u4e00\u500b\u6708\u53ef\u4eab\u6709\u514d\u8cbb\u4f7f\u7528\u512a\u60e0\uff08\u4ee5\u8cc7\u8a0a\u4e2d\u5fc3\u6700\u65b0\u516c\u544a\u70ba\u6e96\uff09\u3002</li> <li>H100 \u578b\u6bcf\u500b\u5de5\u4f5c\uff08job\uff09\u6700\u9577 TimeLimit \u70ba 7 \u5929\uff1bH200 \u578b\u6bcf\u500b\u5de5\u4f5c\u6700\u9577\u70ba 2 \u5929\u3002</li> <li>\u63d0\u4ea4\u5de5\u4f5c\u524d\u8acb\u5148\u78ba\u8a8d\u8173\u672c\u8207\u8cc7\u6e90\u8a2d\u5b9a\uff08CPU\u3001Memory\u3001GPU\u3001TimeLimit\uff09\u6b63\u78ba\uff0c\u4ee5\u514d\u5de5\u4f5c\u88ab\u6392\u7a0b\u6216\u88ab\u53d6\u6d88\u4e14\u8cc7\u6e90\u4ecd\u88ab\u8a08\u8cbb\u3002</li> </ul>"},{"location":"hpc/#_7","title":"\u806f\u7d61\u8cc7\u8a0a","text":"<p>\u806f\u7d61\u7a97\u53e3\uff1a\u9122\u9298\u5b8f \u627f\u8fa6\u4eba\uff0c\u5206\u6a5f\uff1a31724 Email\uff1ahpc@nycu.edu.tw</p>"},{"location":"hpc/basic/","title":"\u57fa\u672c\u64cd\u4f5c\u8aaa\u660e","text":""},{"location":"hpc/basic/#linux","title":"Linux \u57fa\u672c\u6307\u4ee4","text":""},{"location":"hpc/basic/#_2","title":"\u6a94\u6848\u8207\u76ee\u9304\u64cd\u4f5c","text":""},{"location":"hpc/basic/#_3","title":"\u67e5\u770b\u76ee\u9304\u5167\u5bb9","text":"<pre><code>ls              # \u5217\u51fa\u7576\u524d\u76ee\u9304\u7684\u6a94\u6848\nls -l           # \u8a73\u7d30\u5217\u51fa\u6a94\u6848\u8cc7\u8a0a\uff08\u6b0a\u9650\u3001\u5927\u5c0f\u3001\u4fee\u6539\u6642\u9593\u7b49\uff09\nls -a           # \u986f\u793a\u6240\u6709\u6a94\u6848\uff08\u5305\u542b\u96b1\u85cf\u6a94\u6848\uff09\nls -lh          # \u4ee5\u4eba\u985e\u53ef\u8b80\u7684\u65b9\u5f0f\u986f\u793a\u6a94\u6848\u5927\u5c0f\uff08KB, MB, GB\uff09\n</code></pre>"},{"location":"hpc/basic/#_4","title":"\u5207\u63db\u76ee\u9304","text":"<pre><code>cd /path/to/dir    # \u79fb\u52d5\u5230\u6307\u5b9a\u76ee\u9304\ncd ~               # \u79fb\u52d5\u5230\u5bb6\u76ee\u9304\ncd ..              # \u79fb\u52d5\u5230\u4e0a\u4e00\u5c64\u76ee\u9304\ncd -               # \u79fb\u52d5\u5230\u524d\u4e00\u500b\u76ee\u9304\npwd                # \u986f\u793a\u76ee\u524d\u6240\u5728\u7684\u5b8c\u6574\u8def\u5f91\n</code></pre>"},{"location":"hpc/basic/#_5","title":"\u5efa\u7acb\u8207\u522a\u9664","text":"<pre><code>mkdir dirname         # \u5efa\u7acb\u65b0\u76ee\u9304\nmkdir -p dir1/dir2    # \u5efa\u7acb\u591a\u5c64\u76ee\u9304\nrm filename           # \u522a\u9664\u6a94\u6848\nrm -r dirname         # \u522a\u9664\u76ee\u9304\u53ca\u5176\u5167\u5bb9\nrm -rf dirname        # \u5f37\u5236\u522a\u9664\u76ee\u9304\uff08\u4e0d\u8a62\u554f\uff0c\u8acb\u8b39\u614e\u4f7f\u7528\uff09\n</code></pre>"},{"location":"hpc/basic/#_6","title":"\u8907\u88fd\u8207\u79fb\u52d5","text":"<pre><code>cp file1 file2        # \u8907\u88fd\u6a94\u6848\ncp -r dir1 dir2       # \u8907\u88fd\u6574\u500b\u76ee\u9304\nmv file1 file2        # \u79fb\u52d5\u6216\u91cd\u65b0\u547d\u540d\u6a94\u6848\nmv file1 /path/to/    # \u79fb\u52d5\u6a94\u6848\u5230\u6307\u5b9a\u76ee\u9304\n</code></pre>"},{"location":"hpc/basic/#_7","title":"\u6a94\u6848\u5167\u5bb9\u6aa2\u8996","text":"<pre><code>cat filename          # \u986f\u793a\u6574\u500b\u6a94\u6848\u5167\u5bb9\nhead filename         # \u986f\u793a\u6a94\u6848\u524d 10 \u884c\nhead -n 20 filename   # \u986f\u793a\u6a94\u6848\u524d 20 \u884c\ntail filename         # \u986f\u793a\u6a94\u6848\u6700\u5f8c 10 \u884c\ntail -f filename      # \u6301\u7e8c\u986f\u793a\u6a94\u6848\u65b0\u589e\u7684\u5167\u5bb9\uff08\u5e38\u7528\u65bc\u67e5\u770b log\uff09\nless filename         # \u5206\u9801\u986f\u793a\u6a94\u6848\uff08\u53ef\u4e0a\u4e0b\u6372\u52d5\uff0c\u6309 q \u96e2\u958b\uff09\n</code></pre>"},{"location":"hpc/basic/#_8","title":"\u6a94\u6848\u641c\u5c0b","text":"<pre><code>find /path -name \"*.txt\"     # \u5728\u6307\u5b9a\u8def\u5f91\u641c\u5c0b\u6240\u6709 .txt \u6a94\u6848\ngrep \"keyword\" filename      # \u5728\u6a94\u6848\u4e2d\u641c\u5c0b\u5305\u542b\u95dc\u9375\u5b57\u7684\u884c\ngrep -r \"keyword\" /path      # \u5728\u76ee\u9304\u4e2d\u905e\u8ff4\u641c\u5c0b\u95dc\u9375\u5b57\n</code></pre>"},{"location":"hpc/basic/#_9","title":"\u6a94\u6848\u6b0a\u9650","text":"<pre><code>chmod 755 filename    # \u4fee\u6539\u6a94\u6848\u6b0a\u9650\uff087=rwx, 5=r-x\uff09\nchmod +x script.sh    # \u8b93\u6a94\u6848\u8b8a\u6210\u53ef\u57f7\u884c\nchown user:group file # \u4fee\u6539\u6a94\u6848\u64c1\u6709\u8005\n</code></pre>"},{"location":"hpc/basic/#_10","title":"\u7cfb\u7d71\u8cc7\u6e90\u67e5\u770b","text":"<pre><code>df -h                 # \u67e5\u770b\u78c1\u789f\u7a7a\u9593\u4f7f\u7528\u60c5\u6cc1\ndu -sh dirname        # \u67e5\u770b\u76ee\u9304\u5927\u5c0f\ntop                   # \u5373\u6642\u986f\u793a\u7cfb\u7d71\u8cc7\u6e90\u4f7f\u7528\u72c0\u6cc1\uff08\u6309 q \u96e2\u958b\uff09\nhtop                  # \u66f4\u53cb\u5584\u7684\u7cfb\u7d71\u76e3\u63a7\u5de5\u5177\uff08\u5982\u679c\u6709\u5b89\u88dd\uff09\n</code></pre>"},{"location":"hpc/basic/#slurm","title":"Slurm \u57fa\u672c\u64cd\u4f5c","text":"<p>Slurm \u662f\u9ad8\u6548\u80fd\u904b\u7b97\u53e2\u96c6\u7684\u5de5\u4f5c\u6392\u7a0b\u7cfb\u7d71\uff0c\u7528\u65bc\u7ba1\u7406\u548c\u5206\u914d\u904b\u7b97\u8cc7\u6e90\u3002</p>"},{"location":"hpc/basic/#_11","title":"\u67e5\u770b\u53e2\u96c6\u72c0\u614b","text":""},{"location":"hpc/basic/#_12","title":"\u67e5\u770b\u7bc0\u9ede\u8cc7\u8a0a","text":"<pre><code>sinfo                 # \u986f\u793a\u6240\u6709\u7bc0\u9ede\u7684\u72c0\u614b\nsinfo -N              # \u4ee5\u7bc0\u9ede\u70ba\u55ae\u4f4d\u986f\u793a\nsinfo -l              # \u986f\u793a\u8a73\u7d30\u8cc7\u8a0a\n</code></pre> <p>\u7bc0\u9ede\u72c0\u614b\u8aaa\u660e\uff1a - <code>idle</code>: \u7bc0\u9ede\u9592\u7f6e\uff0c\u53ef\u63a5\u53d7\u65b0\u5de5\u4f5c - <code>alloc</code>: \u7bc0\u9ede\u5df2\u88ab\u5b8c\u5168\u5206\u914d - <code>mix</code>: \u7bc0\u9ede\u90e8\u5206\u8cc7\u6e90\u88ab\u4f7f\u7528 - <code>down</code>: \u7bc0\u9ede\u96e2\u7dda</p>"},{"location":"hpc/basic/#partition","title":"\u67e5\u770b\u4f47\u5217\uff08partition\uff09\u8cc7\u8a0a","text":"<pre><code>sinfo -s              # \u7c21\u8981\u986f\u793a\u5404\u4f47\u5217\u72c0\u614b\nsqueue                # \u67e5\u770b\u76ee\u524d\u6240\u6709\u6392\u968a\u548c\u57f7\u884c\u4e2d\u7684\u5de5\u4f5c\nsqueue -u username    # \u67e5\u770b\u7279\u5b9a\u4f7f\u7528\u8005\u7684\u5de5\u4f5c\n</code></pre>"},{"location":"hpc/basic/#_13","title":"\u63d0\u4ea4\u5de5\u4f5c","text":""},{"location":"hpc/basic/#_14","title":"\u4e92\u52d5\u5f0f\u5de5\u4f5c","text":"<p>\u9069\u5408\u9700\u8981\u5373\u6642\u4e92\u52d5\u6216\u6e2c\u8a66\u7684\u60c5\u6cc1\uff1a</p> <pre><code>srun -p partition_name -N 1 -n 4 --pty bash\n</code></pre> <p>\u53c3\u6578\u8aaa\u660e\uff1a - <code>-p</code>: \u6307\u5b9a\u4f47\u5217\u540d\u7a31 - <code>-N</code>: \u9700\u8981\u7684\u7bc0\u9ede\u6578\u91cf - <code>-n</code>: \u9700\u8981\u7684 CPU \u6838\u5fc3\u6578 - <code>--pty bash</code>: \u555f\u52d5\u4e92\u52d5\u5f0f shell</p>"},{"location":"hpc/basic/#_15","title":"\u6279\u6b21\u5de5\u4f5c","text":"<p>\u9069\u5408\u9577\u6642\u9593\u57f7\u884c\u7684\u904b\u7b97\u4efb\u52d9\uff1a</p> <p>\u5efa\u7acb\u5de5\u4f5c\u8173\u672c <code>job.sh</code>\uff1a</p> <pre><code>#!/bin/bash\n#SBATCH -J job_name           # \u5de5\u4f5c\u540d\u7a31\n#SBATCH -p partition_name     # \u4f47\u5217\u540d\u7a31\n#SBATCH -N 1                  # \u9700\u8981 1 \u500b\u7bc0\u9ede\n#SBATCH -n 4                  # \u9700\u8981 4 \u500b CPU \u6838\u5fc3\n#SBATCH -t 24:00:00           # \u6700\u9577\u57f7\u884c\u6642\u9593\uff0824 \u5c0f\u6642\uff09\n#SBATCH -o output_%j.txt      # \u6a19\u6e96\u8f38\u51fa\u6a94\u6848\uff08%j \u6703\u88ab\u5de5\u4f5c ID \u53d6\u4ee3\uff09\n#SBATCH -e error_%j.txt       # \u932f\u8aa4\u8f38\u51fa\u6a94\u6848\n\n# \u8f09\u5165\u9700\u8981\u7684\u6a21\u7d44\nmodule load gcc\nmodule load python\n\n# \u57f7\u884c\u4f60\u7684\u7a0b\u5f0f\npython your_script.py\n</code></pre> <p>\u63d0\u4ea4\u5de5\u4f5c\uff1a</p> <pre><code>sbatch job.sh\n</code></pre>"},{"location":"hpc/basic/#_16","title":"\u7ba1\u7406\u5de5\u4f5c","text":""},{"location":"hpc/basic/#_17","title":"\u67e5\u770b\u5de5\u4f5c\u72c0\u614b","text":"<pre><code>squeue -j job_id      # \u67e5\u770b\u7279\u5b9a\u5de5\u4f5c\u7684\u72c0\u614b\nscontrol show job job_id    # \u986f\u793a\u5de5\u4f5c\u7684\u8a73\u7d30\u8cc7\u8a0a\n</code></pre> <p>\u5de5\u4f5c\u72c0\u614b\u8aaa\u660e\uff1a - <code>PD</code> (Pending): \u7b49\u5f85\u4e2d - <code>R</code> (Running): \u57f7\u884c\u4e2d - <code>CG</code> (Completing): \u5373\u5c07\u5b8c\u6210 - <code>CD</code> (Completed): \u5df2\u5b8c\u6210 - <code>F</code> (Failed): \u5931\u6557 - <code>CA</code> (Cancelled): \u5df2\u53d6\u6d88</p>"},{"location":"hpc/basic/#_18","title":"\u53d6\u6d88\u5de5\u4f5c","text":"<pre><code>scancel job_id        # \u53d6\u6d88\u7279\u5b9a\u5de5\u4f5c\nscancel -u username   # \u53d6\u6d88\u8a72\u4f7f\u7528\u8005\u7684\u6240\u6709\u5de5\u4f5c\nscancel -n job_name   # \u53d6\u6d88\u7279\u5b9a\u540d\u7a31\u7684\u5de5\u4f5c\n</code></pre>"},{"location":"hpc/basic/#_19","title":"\u67e5\u770b\u5de5\u4f5c\u6b77\u53f2","text":"<pre><code>sacct                           # \u67e5\u770b\u6700\u8fd1\u7684\u5de5\u4f5c\u8a18\u9304\nsacct -j job_id                 # \u67e5\u770b\u7279\u5b9a\u5de5\u4f5c\u7684\u8a18\u9304\nsacct -S 2024-01-01             # \u67e5\u770b\u6307\u5b9a\u65e5\u671f\u5f8c\u7684\u5de5\u4f5c\u8a18\u9304\nsacct --format=JobID,JobName,State,Elapsed,MaxRSS    # \u81ea\u8a02\u986f\u793a\u6b04\u4f4d\n</code></pre>"},{"location":"hpc/basic/#_20","title":"\u5e38\u7528\u53c3\u6578\u7d44\u5408\u7bc4\u4f8b","text":""},{"location":"hpc/basic/#gpu","title":"GPU \u904b\u7b97\u5de5\u4f5c","text":"<pre><code>#!/bin/bash\n#SBATCH -J gpu_job\n#SBATCH -p gpu_partition\n#SBATCH --gres=gpu:1          # \u9700\u8981 1 \u5f35 GPU\n#SBATCH -c 4                  # \u9700\u8981 4 \u500b CPU \u6838\u5fc3\n#SBATCH -t 12:00:00\n#SBATCH -o output_%j.txt\n\nnvidia-smi                     # \u6aa2\u67e5 GPU \u72c0\u614b\npython train_model.py\n</code></pre>"},{"location":"hpc/basic/#_21","title":"\u8a18\u61b6\u9ad4\u5bc6\u96c6\u578b\u5de5\u4f5c","text":"<pre><code>#!/bin/bash\n#SBATCH -J memory_job\n#SBATCH -p normal\n#SBATCH --mem=32G             # \u9700\u8981 32GB \u8a18\u61b6\u9ad4\n#SBATCH -c 8\n#SBATCH -t 48:00:00\n\nyour_program\n</code></pre>"},{"location":"hpc/basic/#_22","title":"\u9663\u5217\u5de5\u4f5c\uff08\u6279\u6b21\u8655\u7406\u591a\u500b\u985e\u4f3c\u4efb\u52d9\uff09","text":"<pre><code>#!/bin/bash\n#SBATCH -J array_job\n#SBATCH -p normal\n#SBATCH --array=1-10          # \u540c\u6642\u57f7\u884c 10 \u500b\u4efb\u52d9\n#SBATCH -c 2\n#SBATCH -t 2:00:00\n\n# SLURM_ARRAY_TASK_ID \u6703\u662f 1 \u5230 10\npython process.py --input file_${SLURM_ARRAY_TASK_ID}.txt\n</code></pre>"},{"location":"hpc/basic/#_23","title":"\u5be6\u7528\u6280\u5de7","text":""},{"location":"hpc/basic/#_24","title":"\u6aa2\u67e5\u5de5\u4f5c\u9810\u4f30\u958b\u59cb\u6642\u9593","text":"<pre><code>squeue -j job_id --start\n</code></pre>"},{"location":"hpc/basic/#_25","title":"\u67e5\u770b\u53ef\u7528\u8cc7\u6e90","text":"<pre><code>sinfo -o \"%20P %5a %10l %6D %6t %N\"\n</code></pre>"},{"location":"hpc/basic/#_26","title":"\u76e3\u63a7\u57f7\u884c\u4e2d\u7684\u5de5\u4f5c","text":"<pre><code># \u67e5\u770b\u5de5\u4f5c\u7684\u8f38\u51fa\u6a94\u6848\ntail -f output_job_id.txt\n\n# \u767b\u5165\u57f7\u884c\u5de5\u4f5c\u7684\u7bc0\u9ede\uff08\u5982\u679c\u5141\u8a31\uff09\nsqueue -j job_id -o \"%N\"     # \u5148\u627e\u51fa\u7bc0\u9ede\u540d\u7a31\nssh node_name                # \u767b\u5165\u8a72\u7bc0\u9ede\n</code></pre>"},{"location":"hpc/basic/#_27","title":"\u6a21\u7d44\u7ba1\u7406","text":"<p>\u8a31\u591a HPC \u7cfb\u7d71\u4f7f\u7528 module \u4f86\u7ba1\u7406\u8edf\u9ad4\u74b0\u5883\uff1a</p> <pre><code>module avail              # \u5217\u51fa\u6240\u6709\u53ef\u7528\u7684\u6a21\u7d44\nmodule list               # \u986f\u793a\u5df2\u8f09\u5165\u7684\u6a21\u7d44\nmodule load module_name   # \u8f09\u5165\u7279\u5b9a\u6a21\u7d44\nmodule unload module_name # \u5378\u8f09\u6a21\u7d44\nmodule purge              # \u5378\u8f09\u6240\u6709\u6a21\u7d44\nmodule spider software    # \u641c\u5c0b\u7279\u5b9a\u8edf\u9ad4\n</code></pre>"},{"location":"hpc/basic/#_28","title":"\u6ce8\u610f\u4e8b\u9805","text":"<ol> <li>\u4e0d\u8981\u5728\u767b\u5165\u7bc0\u9ede\u57f7\u884c\u904b\u7b97\u4efb\u52d9\uff1a\u767b\u5165\u7bc0\u9ede\u662f\u5171\u7528\u8cc7\u6e90\uff0c\u61c9\u8a72\u53ea\u7528\u65bc\u7de8\u8f2f\u6a94\u6848\u3001\u63d0\u4ea4\u5de5\u4f5c\u7b49\u8f15\u91cf\u64cd\u4f5c</li> <li>\u5408\u7406\u4f30\u8a08\u8cc7\u6e90\u9700\u6c42\uff1a\u7533\u8acb\u904e\u591a\u8cc7\u6e90\u6703\u5ef6\u9577\u7b49\u5f85\u6642\u9593\uff0c\u7533\u8acb\u4e0d\u8db3\u5247\u53ef\u80fd\u5c0e\u81f4\u5de5\u4f5c\u5931\u6557</li> <li>\u8a2d\u5b9a\u5408\u7406\u7684\u6642\u9593\u9650\u5236\uff1a\u78ba\u4fdd\u5de5\u4f5c\u80fd\u5728\u6642\u9650\u5167\u5b8c\u6210\uff0c\u4f46\u4e0d\u8981\u8a2d\u5b9a\u904e\u9577\u7684\u6642\u9593</li> <li>\u5b9a\u671f\u6e05\u7406\u6a94\u6848\uff1a\u5de5\u4f5c\u7522\u751f\u7684\u66ab\u5b58\u6a94\u548c\u8f38\u51fa\u6a94\u6848\u61c9\u5b9a\u671f\u522a\u9664\uff0c\u907f\u514d\u4f54\u7528\u904e\u591a\u7a7a\u9593</li> <li>\u5099\u4efd\u91cd\u8981\u8cc7\u6599\uff1a\u5de5\u4f5c\u76ee\u9304\u901a\u5e38\u4e0d\u6703\u81ea\u52d5\u5099\u4efd\uff0c\u91cd\u8981\u8cc7\u6599\u8acb\u53e6\u884c\u5099\u4efd</li> </ol>"},{"location":"hpc/container/","title":"\u5bb9\u5668\u76f8\u95dc","text":""},{"location":"hpc/container/#_2","title":"\u4ec0\u9ebc\u662f\u5bb9\u5668","text":"<p>\u5bb9\u5668\uff08Container\uff09\u662f\u4e00\u7a2e\u8f15\u91cf\u7d1a\u7684\u865b\u64ec\u5316\u6280\u8853\uff0c\u53ef\u4ee5\u5c07\u61c9\u7528\u7a0b\u5f0f\u53ca\u5176\u6240\u6709\u76f8\u4f9d\u5957\u4ef6\u3001\u51fd\u5f0f\u5eab\u3001\u8a2d\u5b9a\u6a94\u6253\u5305\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u500b\u7368\u7acb\u7684\u57f7\u884c\u74b0\u5883\u3002\u5bb9\u5668\u6280\u8853\u8b93\u61c9\u7528\u7a0b\u5f0f\u80fd\u5920\u5728\u4e0d\u540c\u7684\u904b\u7b97\u74b0\u5883\u4e2d\u4fdd\u6301\u4e00\u81f4\u7684\u57f7\u884c\u65b9\u5f0f\u3002</p>"},{"location":"hpc/container/#_3","title":"\u5bb9\u5668\u7684\u7279\u9ede","text":"<p>\u9694\u96e2\u6027 - \u6bcf\u500b\u5bb9\u5668\u90fd\u6709\u7368\u7acb\u7684\u6a94\u6848\u7cfb\u7d71\u3001\u7a0b\u5e8f\u7a7a\u9593\u548c\u7db2\u8def\u4ecb\u9762 - \u5bb9\u5668\u5167\u7684\u7a0b\u5f0f\u4e0d\u6703\u5f71\u97ff\u5230\u4e3b\u6a5f\u7cfb\u7d71\u6216\u5176\u4ed6\u5bb9\u5668 - \u53ef\u4ee5\u5728\u540c\u4e00\u53f0\u6a5f\u5668\u4e0a\u57f7\u884c\u591a\u500b\u4e0d\u540c\u74b0\u5883\u7684\u5bb9\u5668</p> <p>\u53ef\u651c\u6027 - \u5bb9\u5668\u6620\u50cf\u6a94\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u6a5f\u5668\u548c\u5e73\u53f0\u4e0a\u57f7\u884c - \u958b\u767c\u74b0\u5883\u8207\u6b63\u5f0f\u74b0\u5883\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u5bb9\u5668\u914d\u7f6e - \u5bb9\u6613\u5206\u4eab\u548c\u91cd\u73fe\u7279\u5b9a\u7684\u8edf\u9ad4\u74b0\u5883</p> <p>\u8f15\u91cf\u5316 - \u5bb9\u5668\u76f4\u63a5\u4f7f\u7528\u4e3b\u6a5f\u7684\u4f5c\u696d\u7cfb\u7d71\u6838\u5fc3\uff0c\u4e0d\u9700\u8981\u5b8c\u6574\u7684\u865b\u64ec\u6a5f\u5668 - \u555f\u52d5\u901f\u5ea6\u5feb\uff0c\u8cc7\u6e90\u6d88\u8017\u5c11 - \u53ef\u4ee5\u5728\u540c\u4e00\u53f0\u6a5f\u5668\u4e0a\u57f7\u884c\u5927\u91cf\u5bb9\u5668</p> <p>\u7248\u672c\u63a7\u5236 - \u5bb9\u5668\u6620\u50cf\u6a94\u53ef\u4ee5\u50cf\u7a0b\u5f0f\u78bc\u4e00\u6a23\u9032\u884c\u7248\u672c\u7ba1\u7406 - \u5bb9\u6613\u56de\u6eaf\u5230\u5148\u524d\u7684\u74b0\u5883\u8a2d\u5b9a - \u4fbf\u65bc\u8ffd\u8e64\u74b0\u5883\u8b8a\u66f4</p>"},{"location":"hpc/container/#vs","title":"\u5bb9\u5668 vs \u865b\u64ec\u6a5f\u5668","text":"\u7279\u6027 \u5bb9\u5668 \u865b\u64ec\u6a5f\u5668 \u555f\u52d5\u901f\u5ea6 \u79d2\u7d1a \u5206\u9418\u7d1a \u8cc7\u6e90\u6d88\u8017 \u4f4e\uff08\u5171\u7528\u6838\u5fc3\uff09 \u9ad8\uff08\u5b8c\u6574\u4f5c\u696d\u7cfb\u7d71\uff09 \u9694\u96e2\u7a0b\u5ea6 \u7a0b\u5e8f\u7d1a\u9694\u96e2 \u5b8c\u5168\u9694\u96e2 \u6620\u50cf\u6a94\u5927\u5c0f MB \u7d1a GB \u7d1a \u6548\u80fd \u63a5\u8fd1\u539f\u751f \u6709\u865b\u64ec\u5316\u640d\u8017"},{"location":"hpc/container/#hpc","title":"HPC \u74b0\u5883\u4e2d\u7684\u5bb9\u5668\u6280\u8853","text":"<p>\u5728 HPC \u74b0\u5883\u4e2d\uff0c\u6211\u5011\u4f7f\u7528 Singularity\uff08\u73fe\u7a31\u70ba Apptainer\uff09\u4f5c\u70ba\u5bb9\u5668\u5e73\u53f0\u3002Singularity \u662f\u5c08\u70ba HPC \u548c\u79d1\u5b78\u904b\u7b97\u8a2d\u8a08\u7684\u5bb9\u5668\u89e3\u6c7a\u65b9\u6848\uff0c\u76f8\u8f03\u65bc\u4e00\u822c\u7684 Docker\uff0c\u5b83\u5177\u6709\u4ee5\u4e0b\u512a\u52e2\uff1a</p> <p>\u5b89\u5168\u6027 - \u4e0d\u9700\u8981 root \u6b0a\u9650\u5373\u53ef\u57f7\u884c\u5bb9\u5668 - \u4f7f\u7528\u8005\u5728\u5bb9\u5668\u5167\u5916\u4fdd\u6301\u76f8\u540c\u7684\u8eab\u4efd - \u9069\u5408\u591a\u4f7f\u7528\u8005\u5171\u4eab\u7684 HPC \u74b0\u5883</p> <p>\u6548\u80fd - \u76f4\u63a5\u5b58\u53d6\u4e3b\u6a5f\u7684 GPU\u3001\u9ad8\u901f\u7db2\u8def\u7b49\u786c\u9ad4\u8cc7\u6e90 - \u91dd\u5c0d HPC \u5de5\u4f5c\u8ca0\u8f09\u6700\u4f73\u5316 - \u652f\u63f4 MPI\uff08Message Passing Interface\uff09\u5e73\u884c\u904b\u7b97</p> <p>\u76f8\u5bb9\u6027 - \u53ef\u4ee5\u76f4\u63a5\u57f7\u884c Docker \u6620\u50cf\u6a94 - \u652f\u63f4\u5f9e Docker Hub\u3001NGC \u7b49\u5e73\u53f0\u4e0b\u8f09\u6620\u50cf\u6a94 - \u6574\u5408 HPC \u6392\u7a0b\u7cfb\u7d71\uff08\u5982 Slurm\uff09</p>"},{"location":"hpc/container/#_4","title":"\u4f55\u6642\u9700\u8981\u4f7f\u7528\u5bb9\u5668","text":""},{"location":"hpc/container/#_5","title":"\u4f7f\u7528\u60c5\u5883","text":"<p>1. \u5e73\u53f0\u4e0a\u6c92\u6709\u9700\u8981\u7684\u8edf\u9ad4\u6216\u7248\u672c</p> <p>\u7576 HPC \u5e73\u53f0\u6c92\u6709\u63d0\u4f9b\u4f60\u9700\u8981\u7684\u8edf\u9ad4\uff0c\u6216\u662f\u8edf\u9ad4\u7248\u672c\u4e0d\u7b26\u5408\u9700\u6c42\u6642\uff1a</p> <pre><code># \u4f8b\u5982\uff1a\u9700\u8981\u7279\u5b9a\u7248\u672c\u7684 Python \u548c\u5957\u4ef6\n# \u5e73\u53f0\u63d0\u4f9b\uff1aPython 3.8\n# \u4f60\u9700\u8981\uff1aPython 3.11 + \u7279\u5b9a\u7248\u672c\u7684 TensorFlow\n\n# \u4f7f\u7528\u5bb9\u5668\u53ef\u4ee5\u81ea\u8a02\u5b8c\u6574\u7684\u74b0\u5883\n</code></pre> <p>2. \u9700\u8981\u8907\u96dc\u7684\u8edf\u9ad4\u76f8\u4f9d\u6027</p> <p>\u7576\u4f60\u7684\u7a0b\u5f0f\u9700\u8981\u591a\u500b\u76f8\u4f9d\u5957\u4ef6\uff0c\u4e14\u9019\u4e9b\u5957\u4ef6\u4e4b\u9593\u6709\u8907\u96dc\u7684\u7248\u672c\u76f8\u4f9d\u95dc\u4fc2\uff1a</p> <ul> <li>\u6df1\u5ea6\u5b78\u7fd2\u6846\u67b6\uff08TensorFlow\u3001PyTorch\uff09\u8207\u7279\u5b9a\u7248\u672c\u7684 CUDA\u3001cuDNN</li> <li>\u751f\u7269\u8cc7\u8a0a\u8edf\u9ad4\u5957\u4ef6\u8207\u5176\u76f8\u4f9d\u7684\u51fd\u5f0f\u5eab</li> <li>\u7279\u5b9a\u7248\u672c\u7684\u7de8\u8b6f\u5668\u548c\u51fd\u5f0f\u5eab\u7d44\u5408</li> </ul> <p>3. \u74b0\u5883\u91cd\u73fe\u6027\u9700\u6c42</p> <p>\u7576\u4f60\u9700\u8981\u78ba\u4fdd\u7814\u7a76\u7d50\u679c\u53ef\u4ee5\u91cd\u73fe\uff1a</p> <ul> <li>\u767c\u8868\u8ad6\u6587\u6642\u63d0\u4f9b\u5b8c\u6574\u7684\u904b\u7b97\u74b0\u5883</li> <li>\u5728\u4e0d\u540c\u7684 HPC \u5e73\u53f0\u4e0a\u57f7\u884c\u76f8\u540c\u7684\u5be6\u9a57</li> <li>\u8207\u5718\u968a\u6210\u54e1\u5171\u4eab\u4e00\u81f4\u7684\u958b\u767c\u74b0\u5883</li> </ul> <p>4. \u6e2c\u8a66\u4e0d\u540c\u7248\u672c\u7684\u8edf\u9ad4</p> <p>\u7576\u4f60\u9700\u8981\u6bd4\u8f03\u4e0d\u540c\u8edf\u9ad4\u7248\u672c\u7684\u6548\u80fd\u6216\u7d50\u679c\uff1a</p> <pre><code># \u5728\u4e0d\u540c\u7684\u5bb9\u5668\u4e2d\u6e2c\u8a66\u4e0d\u540c\u7248\u672c\nsingularity exec pytorch_1.12.sif python train.py\nsingularity exec pytorch_2.0.sif python train.py\n</code></pre> <p>5. \u9694\u96e2\u5be6\u9a57\u74b0\u5883</p> <p>\u7576\u4f60\u9700\u8981\u57f7\u884c\u53ef\u80fd\u5f71\u97ff\u7cfb\u7d71\u7684\u64cd\u4f5c\uff0c\u6216\u662f\u6e2c\u8a66\u4e0d\u7a69\u5b9a\u7684\u8edf\u9ad4\uff1a</p> <ul> <li>\u907f\u514d\u6c61\u67d3\u4e3b\u6a5f\u74b0\u5883</li> <li>\u6e2c\u8a66\u65b0\u7248\u672c\u8edf\u9ad4\u800c\u4e0d\u5f71\u97ff\u73fe\u6709\u5de5\u4f5c</li> <li>\u5b89\u5168\u5730\u57f7\u884c\u7b2c\u4e09\u65b9\u7a0b\u5f0f</li> </ul> <p>6. \u4f7f\u7528\u9810\u5148\u5efa\u7f6e\u7684\u5c08\u696d\u74b0\u5883</p> <p>\u8a31\u591a\u7d44\u7e54\u63d0\u4f9b\u512a\u5316\u904e\u7684\u5bb9\u5668\u6620\u50cf\u6a94\uff1a</p> <ul> <li>NVIDIA NGC\uff1a\u6df1\u5ea6\u5b78\u7fd2\u6846\u67b6\u3001HPC \u61c9\u7528\u7a0b\u5f0f</li> <li>BioContainers\uff1a\u751f\u7269\u8cc7\u8a0a\u5de5\u5177</li> <li>\u5b98\u65b9\u8edf\u9ad4\u5bb9\u5668\uff1a\u7279\u5b9a\u8edf\u9ad4\u7684\u5b98\u65b9\u6620\u50cf\u6a94</li> </ul>"},{"location":"hpc/container/#_6","title":"\u5be6\u969b\u7bc4\u4f8b","text":"<p>\u7bc4\u4f8b 1\uff1a\u4f7f\u7528\u7279\u5b9a\u7248\u672c\u7684\u6df1\u5ea6\u5b78\u7fd2\u6846\u67b6</p> <pre><code># \u5f9e NGC \u4e0b\u8f09 PyTorch \u5bb9\u5668\nsingularity pull docker://nvcr.io/nvidia/pytorch:23.12-py3\n\n# \u4f7f\u7528\u5bb9\u5668\u57f7\u884c\u8a13\u7df4\u7a0b\u5f0f\nsingularity exec --nv pytorch_23.12-py3.sif python train.py\n</code></pre> <p>\u7bc4\u4f8b 2\uff1a\u5efa\u7acb\u81ea\u8a02\u7684\u7814\u7a76\u74b0\u5883</p> <pre><code># \u5efa\u7acb\u5305\u542b\u7279\u5b9a\u7248\u672c\u5957\u4ef6\u7684\u5bb9\u5668\n# \u4f7f\u7528 definition file \u5b9a\u7fa9\u74b0\u5883\nsingularity build my_research.sif my_research.def\n\n# \u5728\u5bb9\u5668\u4e2d\u57f7\u884c\u5206\u6790\nsingularity exec my_research.sif python analysis.py\n</code></pre> <p>\u7bc4\u4f8b 3\uff1a\u8207\u5718\u968a\u5171\u4eab\u74b0\u5883</p> <pre><code># \u5efa\u7acb\u5bb9\u5668\u6620\u50cf\u6a94\nsingularity build shared_env.sif environment.def\n\n# \u5206\u4eab\u7d66\u5718\u968a\u6210\u54e1\uff08\u53ea\u9700\u8907\u88fd .sif \u6a94\u6848\uff09\n# \u6240\u6709\u4eba\u90fd\u80fd\u4f7f\u7528\u5b8c\u5168\u76f8\u540c\u7684\u74b0\u5883\nsingularity exec shared_env.sif python project.py\n</code></pre>"},{"location":"hpc/container/#_7","title":"\u4e0d\u9700\u8981\u4f7f\u7528\u5bb9\u5668\u7684\u60c5\u6cc1","text":"<p>\u4ee5\u4e0b\u60c5\u6cc1\u901a\u5e38\u4e0d\u9700\u8981\u4f7f\u7528\u5bb9\u5668\uff1a</p> <ol> <li>\u5e73\u53f0\u5df2\u63d0\u4f9b\u6240\u9700\u8edf\u9ad4\uff1a\u5982\u679c module \u7cfb\u7d71\u5df2\u6709\u9069\u5408\u7684\u7248\u672c</li> <li>\u7c21\u55ae\u7684\u8173\u672c\u7a0b\u5f0f\uff1a\u53ea\u4f7f\u7528\u6a19\u6e96\u51fd\u5f0f\u5eab\u7684\u7a0b\u5f0f</li> <li>\u6548\u80fd\u6975\u5ea6\u654f\u611f\uff1a\u67d0\u4e9b\u60c5\u6cc1\u4e0b\u5bb9\u5668\u53ef\u80fd\u6709\u5fae\u5c0f\u7684\u6548\u80fd\u640d\u5931</li> <li>\u5b78\u7fd2\u57fa\u672c\u64cd\u4f5c\uff1a\u521d\u5b78\u8005\u5efa\u8b70\u5148\u719f\u6089\u57fa\u672c\u7684 HPC \u64cd\u4f5c</li> </ol>"},{"location":"hpc/container/#_8","title":"\u5bb9\u5668\u4f7f\u7528\u6d41\u7a0b","text":"<p>\u5728 HPC \u74b0\u5883\u4e2d\u4f7f\u7528\u5bb9\u5668\u7684\u5178\u578b\u6d41\u7a0b\uff1a</p> <pre><code>graph LR\n    A[\u78ba\u8a8d\u9700\u6c42] --&gt; B{\u662f\u5426\u6709\u73fe\u6210\u6620\u50cf\u6a94?}\n    B --&gt;|\u6709| C[\u4e0b\u8f09\u6620\u50cf\u6a94]\n    B --&gt;|\u6c92\u6709| D[\u5efa\u7acb\u81ea\u8a02\u6620\u50cf\u6a94]\n    C --&gt; E[\u6e2c\u8a66\u5bb9\u5668]\n    D --&gt; E\n    E --&gt; F[\u6574\u5408\u5230 Slurm \u5de5\u4f5c]\n    F --&gt; G[\u57f7\u884c\u904b\u7b97\u4efb\u52d9]\n</code></pre>"},{"location":"hpc/container/#_9","title":"\u6b65\u9a5f\u8aaa\u660e","text":"<ol> <li>\u78ba\u8a8d\u9700\u6c42\uff1a\u660e\u78ba\u4f60\u9700\u8981\u7684\u8edf\u9ad4\u548c\u7248\u672c</li> <li>\u5c0b\u627e\u6620\u50cf\u6a94\uff1a\u5728 Docker Hub\u3001NGC \u7b49\u5e73\u53f0\u641c\u5c0b</li> <li>\u4e0b\u8f09\u6216\u5efa\u7acb\uff1a\u4f7f\u7528\u73fe\u6210\u6620\u50cf\u6a94\u6216\u81ea\u884c\u5efa\u7acb</li> <li>\u6e2c\u8a66\u9a57\u8b49\uff1a\u5728\u4e92\u52d5\u6a21\u5f0f\u4e0b\u6e2c\u8a66\u5bb9\u5668\u529f\u80fd</li> <li>\u64b0\u5beb\u5de5\u4f5c\u8173\u672c\uff1a\u5c07\u5bb9\u5668\u6574\u5408\u5230 Slurm \u6279\u6b21\u5de5\u4f5c</li> <li>\u63d0\u4ea4\u57f7\u884c\uff1a\u5728 HPC \u53e2\u96c6\u4e0a\u57f7\u884c\u4efb\u52d9</li> </ol>"},{"location":"hpc/container/#_10","title":"\u5f8c\u7e8c\u7ae0\u7bc0","text":"<ul> <li>\u5f9e NGC \u4e0b\u8f09\u6620\u50cf\u6a94\uff1a\u5982\u4f55\u5f9e NVIDIA GPU Cloud \u53d6\u5f97\u9810\u5148\u5efa\u7f6e\u7684\u5bb9\u5668</li> <li>\u57f7\u884c\u5bb9\u5668\uff1aSingularity \u7684\u57fa\u672c\u57f7\u884c\u65b9\u5f0f\u548c\u53c3\u6578</li> <li>\u88fd\u4f5c\u6620\u50cf\u6a94\uff1a\u5982\u4f55\u5efa\u7acb\u81ea\u8a02\u7684\u5bb9\u5668\u6620\u50cf\u6a94</li> </ul>"},{"location":"hpc/container/#_11","title":"\u5e38\u898b\u554f\u984c","text":"<p>Q: \u5bb9\u5668\u6703\u5f71\u97ff\u7a0b\u5f0f\u6548\u80fd\u55ce\uff1f</p> <p>A: Singularity \u5bb9\u5668\u7684\u6548\u80fd\u63a5\u8fd1\u539f\u751f\u57f7\u884c\uff0c\u7279\u5225\u662f\u5728 HPC \u74b0\u5883\u4e2d\u3002\u5c0d\u65bc GPU \u904b\u7b97\u548c MPI \u5e73\u884c\u904b\u7b97\uff0c\u6548\u80fd\u640d\u5931\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\u3002</p> <p>Q: \u5bb9\u5668\u5167\u7684\u6a94\u6848\u5982\u4f55\u8207\u4e3b\u6a5f\u5171\u4eab\uff1f</p> <p>A: Singularity \u9810\u8a2d\u6703\u639b\u8f09\u4f7f\u7528\u8005\u7684\u5bb6\u76ee\u9304\u548c\u7576\u524d\u5de5\u4f5c\u76ee\u9304\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u5b58\u53d6\u4e3b\u6a5f\u4e0a\u7684\u6a94\u6848\u3002</p> <p>Q: \u53ef\u4ee5\u5728\u5bb9\u5668\u5167\u4f7f\u7528 GPU \u55ce\uff1f</p> <p>A: \u53ef\u4ee5\uff0c\u4f7f\u7528 <code>--nv</code> \u53c3\u6578\u5373\u53ef\u8b93\u5bb9\u5668\u5b58\u53d6\u4e3b\u6a5f\u7684 NVIDIA GPU\u3002</p> <p>Q: \u5bb9\u5668\u6620\u50cf\u6a94\u6703\u4f54\u7528\u5f88\u591a\u7a7a\u9593\u55ce\uff1f</p> <p>A: \u9019\u53d6\u6c7a\u65bc\u6620\u50cf\u6a94\u7684\u5167\u5bb9\u3002\u7c21\u55ae\u7684\u74b0\u5883\u53ef\u80fd\u53ea\u6709\u5e7e\u767e MB\uff0c\u5305\u542b\u5b8c\u6574\u6df1\u5ea6\u5b78\u7fd2\u6846\u67b6\u7684\u6620\u50cf\u6a94\u53ef\u80fd\u6709\u6578 GB\u3002\u5efa\u8b70\u5b9a\u671f\u6e05\u7406\u4e0d\u9700\u8981\u7684\u6620\u50cf\u6a94\u3002</p> <p>Q: Docker \u6620\u50cf\u6a94\u53ef\u4ee5\u5728 Singularity \u4e0a\u57f7\u884c\u55ce\uff1f</p> <p>A: \u53ef\u4ee5\uff0cSingularity \u53ef\u4ee5\u76f4\u63a5\u57f7\u884c Docker \u6620\u50cf\u6a94\uff0c\u6216\u662f\u5c07 Docker \u6620\u50cf\u6a94\u8f49\u63db\u6210 Singularity \u683c\u5f0f\uff08.sif\uff09\u3002</p>"},{"location":"hpc/container/build-image/","title":"\u88fd\u4f5c\u6620\u50cf\u6a94","text":"<p>\u672c\u7ae0\u7bc0\u8aaa\u660e\u5982\u4f55\u88fd\u4f5c\u81ea\u8a02\u7684 Singularity \u5bb9\u5668\u6620\u50cf\u6a94\u3002\u7576\u73fe\u6709\u7684\u5bb9\u5668\u6620\u50cf\u6a94\u7121\u6cd5\u6eff\u8db3\u9700\u6c42\u6642\uff0c\u4f60\u53ef\u4ee5\u5efa\u7acb\u5c08\u5c6c\u7684\u5bb9\u5668\u74b0\u5883\u3002</p>"},{"location":"hpc/container/build-image/#_2","title":"\u6620\u50cf\u6a94\u88fd\u4f5c\u65b9\u5f0f","text":"<p>Singularity \u63d0\u4f9b\u591a\u7a2e\u65b9\u5f0f\u4f86\u88fd\u4f5c\u5bb9\u5668\u6620\u50cf\u6a94\uff1a</p> <ol> <li>\u5f9e Docker Hub \u8f49\u63db\uff1a\u5c07\u73fe\u6709\u7684 Docker \u6620\u50cf\u6a94\u8f49\u63db\u70ba Singularity \u683c\u5f0f</li> <li>\u4f7f\u7528 Definition File\uff1a\u900f\u904e\u8173\u672c\u5b9a\u7fa9\u5bb9\u5668\u74b0\u5883\uff08\u63a8\u85a6\uff09</li> <li>\u5f9e Sandbox \u5efa\u7acb\uff1a\u5728\u53ef\u5beb\u5165\u7684\u76ee\u9304\u4e2d\u5efa\u7acb\u5f8c\u8f49\u63db</li> </ol>"},{"location":"hpc/container/build-image/#docker-hub","title":"\u5f9e Docker Hub \u8f49\u63db","text":"<p>\u6700\u7c21\u55ae\u7684\u65b9\u5f0f\u662f\u5c07 Docker \u6620\u50cf\u6a94\u8f49\u63db\u70ba Singularity \u683c\u5f0f\uff08.sif \u6a94\u6848\uff09\u3002</p>"},{"location":"hpc/container/build-image/#_3","title":"\u57fa\u672c\u7528\u6cd5","text":"<pre><code># \u8a9e\u6cd5\nsingularity pull docker://repository/image:tag\n\n# \u7bc4\u4f8b\uff1a\u4e0b\u8f09 Ubuntu 22.04\nsingularity pull docker://ubuntu:22.04\n\n# \u6703\u7522\u751f ubuntu_22.04.sif \u6a94\u6848\n</code></pre>"},{"location":"hpc/container/build-image/#_4","title":"\u6307\u5b9a\u8f38\u51fa\u6a94\u540d","text":"<pre><code># \u81ea\u8a02\u8f38\u51fa\u6a94\u540d\nsingularity pull my-ubuntu.sif docker://ubuntu:22.04\n</code></pre>"},{"location":"hpc/container/build-image/#_5","title":"\u5e38\u7528\u7684\u57fa\u790e\u6620\u50cf\u6a94","text":"<pre><code># Ubuntu\nsingularity pull docker://ubuntu:22.04\n\n# Python\nsingularity pull docker://python:3.11\n\n# Conda\nsingularity pull docker://continuumio/miniconda3\n\n# NVIDIA CUDA\nsingularity pull docker://nvidia/cuda:12.0.0-base-ubuntu22.04\n</code></pre>"},{"location":"hpc/container/build-image/#definition-file","title":"\u4f7f\u7528 Definition File","text":"<p>Definition File \u662f\u5efa\u7acb\u81ea\u8a02\u5bb9\u5668\u7684\u63a8\u85a6\u65b9\u5f0f\uff0c\u985e\u4f3c\u65bc Docker \u7684 Dockerfile\u3002</p>"},{"location":"hpc/container/build-image/#definition-file_1","title":"Definition File \u7d50\u69cb","text":"<p>Definition File \u5305\u542b\u591a\u500b\u5340\u6bb5\uff08Section\uff09\uff0c\u6bcf\u500b\u5340\u6bb5\u5b9a\u7fa9\u5bb9\u5668\u7684\u4e0d\u540c\u90e8\u5206\uff1a</p> <pre><code>Bootstrap: docker\nFrom: ubuntu:22.04\n\n%post\n    # \u5728\u9019\u88e1\u57f7\u884c\u5b89\u88dd\u6307\u4ee4\n\n%environment\n    # \u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578\n\n%runscript\n    # \u5b9a\u7fa9\u5bb9\u5668\u9810\u8a2d\u57f7\u884c\u7684\u6307\u4ee4\n\n%labels\n    # \u5b9a\u7fa9\u5bb9\u5668\u7684\u6a19\u7c64\u8cc7\u8a0a\n\n%help\n    # \u5b9a\u7fa9\u5bb9\u5668\u7684\u8aaa\u660e\u6587\u4ef6\n</code></pre>"},{"location":"hpc/container/build-image/#_6","title":"\u57fa\u672c\u7bc4\u4f8b","text":"<p>\u5efa\u7acb\u4e00\u500b\u5305\u542b Python \u548c\u5e38\u7528\u79d1\u5b78\u904b\u7b97\u5957\u4ef6\u7684\u5bb9\u5668\uff1a</p> <pre><code>Bootstrap: docker\nFrom: ubuntu:22.04\n\n%post\n    # \u66f4\u65b0\u5957\u4ef6\u6e05\u55ae\n    apt-get update\n\n    # \u5b89\u88dd\u57fa\u672c\u5de5\u5177\n    apt-get install -y wget git vim\n\n    # \u5b89\u88dd Python \u548c pip\n    apt-get install -y python3 python3-pip\n\n    # \u5b89\u88dd Python \u5957\u4ef6\n    pip3 install numpy pandas matplotlib scikit-learn\n\n    # \u6e05\u7406\n    apt-get clean\n    rm -rf /var/lib/apt/lists/*\n\n%environment\n    # \u8a2d\u5b9a Python \u76f8\u95dc\u74b0\u5883\u8b8a\u6578\n    export LC_ALL=C.UTF-8\n    export LANG=C.UTF-8\n\n%runscript\n    # \u9810\u8a2d\u57f7\u884c Python\n    exec python3 \"$@\"\n\n%labels\n    Author your.email@example.com\n    Version v1.0\n\n%help\n    \u9019\u662f\u4e00\u500b\u5305\u542b Python 3 \u548c\u5e38\u7528\u79d1\u5b78\u904b\u7b97\u5957\u4ef6\u7684\u5bb9\u5668\u3002\n\n    \u4f7f\u7528\u65b9\u5f0f\uff1a\n        singularity exec container.sif python3 script.py\n</code></pre>"},{"location":"hpc/container/build-image/#_7","title":"\u5efa\u7acb\u6620\u50cf\u6a94","text":"<pre><code># \u4f7f\u7528 definition file \u5efa\u7acb\u6620\u50cf\u6a94\n# \u6ce8\u610f\uff1a\u9700\u8981 root \u6b0a\u9650\u6216\u4f7f\u7528 --fakeroot\nsingularity build my-python.sif my-python.def\n\n# \u4f7f\u7528 fakeroot \u5efa\u7acb\uff08\u4e0d\u9700\u8981 root \u6b0a\u9650\uff09\nsingularity build --fakeroot my-python.sif my-python.def\n</code></pre>"},{"location":"hpc/container/build-image/#definition-file_2","title":"Definition File \u5404\u5340\u6bb5\u8a73\u89e3","text":""},{"location":"hpc/container/build-image/#bootstrap-from","title":"Bootstrap \u548c From","text":"<p>\u6307\u5b9a\u57fa\u790e\u6620\u50cf\u6a94\u7684\u4f86\u6e90\uff1a</p> <pre><code># \u5f9e Docker Hub\nBootstrap: docker\nFrom: ubuntu:22.04\n\n# \u5f9e\u5176\u4ed6 Singularity \u6620\u50cf\u6a94\nBootstrap: localimage\nFrom: /path/to/existing.sif\n\n# \u5f9e\u7a7a\u767d\u958b\u59cb\uff08\u9032\u968e\u7528\u6cd5\uff09\nBootstrap: debootstrap\nOSVersion: focal\nMirrorURL: http://us.archive.ubuntu.com/ubuntu/\n</code></pre>"},{"location":"hpc/container/build-image/#files","title":"%files","text":"<p>\u5f9e\u4e3b\u6a5f\u8907\u88fd\u6a94\u6848\u5230\u5bb9\u5668\u4e2d\uff1a</p> <pre><code>%files\n    ./config.txt /opt/config.txt\n    ./data/* /data/\n    requirements.txt /tmp/requirements.txt\n</code></pre>"},{"location":"hpc/container/build-image/#post","title":"%post","text":"<p>\u5728\u5bb9\u5668\u4e2d\u57f7\u884c\u5b89\u88dd\u548c\u8a2d\u5b9a\u6307\u4ee4\uff1a</p> <pre><code>%post\n    # \u8a2d\u5b9a\u6642\u5340\n    export DEBIAN_FRONTEND=noninteractive\n    apt-get update\n    apt-get install -y tzdata\n    ln -fs /usr/share/zoneinfo/Asia/Taipei /etc/localtime\n\n    # \u5b89\u88dd\u7de8\u8b6f\u5de5\u5177\n    apt-get install -y build-essential cmake\n\n    # \u5f9e\u539f\u59cb\u78bc\u7de8\u8b6f\u5b89\u88dd\u8edf\u9ad4\n    cd /tmp\n    wget https://example.com/software.tar.gz\n    tar xzf software.tar.gz\n    cd software\n    ./configure --prefix=/usr/local\n    make -j4\n    make install\n\n    # \u4f7f\u7528 pip \u5b89\u88dd Python \u5957\u4ef6\n    pip3 install -r /tmp/requirements.txt\n</code></pre>"},{"location":"hpc/container/build-image/#environment","title":"%environment","text":"<p>\u8a2d\u5b9a\u5bb9\u5668\u57f7\u884c\u6642\u7684\u74b0\u5883\u8b8a\u6578\uff1a</p> <pre><code>%environment\n    # \u8a2d\u5b9a PATH\n    export PATH=/opt/software/bin:$PATH\n\n    # \u8a2d\u5b9a\u51fd\u5f0f\u5eab\u8def\u5f91\n    export LD_LIBRARY_PATH=/opt/software/lib:$LD_LIBRARY_PATH\n\n    # \u8a2d\u5b9a\u61c9\u7528\u7a0b\u5f0f\u7279\u5b9a\u8b8a\u6578\n    export APP_HOME=/opt/app\n    export APP_CONFIG=/opt/app/config.ini\n</code></pre>"},{"location":"hpc/container/build-image/#runscript","title":"%runscript","text":"<p>\u5b9a\u7fa9\u4f7f\u7528 <code>singularity run</code> \u57f7\u884c\u5bb9\u5668\u6642\u7684\u9810\u8a2d\u884c\u70ba\uff1a</p> <pre><code>%runscript\n    echo \"\u57f7\u884c\u5206\u6790\u7a0b\u5f0f...\"\n    exec python3 /opt/app/main.py \"$@\"\n</code></pre>"},{"location":"hpc/container/build-image/#startscript","title":"%startscript","text":"<p>\u5b9a\u7fa9\u5bb9\u5668\u4f5c\u70ba\u670d\u52d9\u57f7\u884c\u6642\u7684\u555f\u52d5\u8173\u672c\uff1a</p> <pre><code>%startscript\n    # \u555f\u52d5 web \u4f3a\u670d\u5668\n    exec python3 -m http.server 8080\n</code></pre>"},{"location":"hpc/container/build-image/#test","title":"%test","text":"<p>\u5b9a\u7fa9\u5bb9\u5668\u7684\u6e2c\u8a66\u6307\u4ee4\uff0c\u5728\u5efa\u7acb\u5f8c\u81ea\u52d5\u57f7\u884c\uff1a</p> <pre><code>%test\n    # \u6e2c\u8a66 Python \u662f\u5426\u6b63\u78ba\u5b89\u88dd\n    python3 --version\n\n    # \u6e2c\u8a66\u5957\u4ef6\u662f\u5426\u53ef\u7528\n    python3 -c \"import numpy; print(numpy.__version__)\"\n    python3 -c \"import pandas; print(pandas.__version__)\"\n</code></pre>"},{"location":"hpc/container/build-image/#labels","title":"%labels","text":"<p>\u65b0\u589e\u5bb9\u5668\u7684\u5143\u8cc7\u6599\u6a19\u7c64\uff1a</p> <pre><code>%labels\n    Author John Doe\n    Email john.doe@example.com\n    Version 1.0.0\n    Description Python\u79d1\u5b78\u904b\u7b97\u74b0\u5883\n    BuildDate 2024-01-15\n</code></pre>"},{"location":"hpc/container/build-image/#help","title":"%help","text":"<p>\u63d0\u4f9b\u5bb9\u5668\u7684\u4f7f\u7528\u8aaa\u660e\uff1a</p> <pre><code>%help\n    Python \u79d1\u5b78\u904b\u7b97\u5bb9\u5668\n\n    \u5305\u542b\u7684\u5957\u4ef6\uff1a\n    - NumPy\n    - Pandas\n    - Matplotlib\n    - Scikit-learn\n\n    \u4f7f\u7528\u7bc4\u4f8b\uff1a\n        # \u57f7\u884c Python \u8173\u672c\n        singularity exec container.sif python3 script.py\n\n        # \u9032\u5165\u4e92\u52d5\u5f0f Python\n        singularity exec container.sif python3\n\n        # \u4f7f\u7528\u9810\u8a2d\u7684 runscript\n        singularity run container.sif\n</code></pre>"},{"location":"hpc/container/build-image/#_8","title":"\u5be6\u969b\u7bc4\u4f8b","text":""},{"location":"hpc/container/build-image/#1","title":"\u7bc4\u4f8b 1\uff1a\u6df1\u5ea6\u5b78\u7fd2\u74b0\u5883","text":"<pre><code>Bootstrap: docker\nFrom: nvidia/cuda:12.0.0-cudnn8-devel-ubuntu22.04\n\n%post\n    # \u5b89\u88dd Python \u548c\u57fa\u672c\u5de5\u5177\n    apt-get update\n    apt-get install -y python3 python3-pip git wget\n\n    # \u5b89\u88dd\u6df1\u5ea6\u5b78\u7fd2\u6846\u67b6\n    pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu120\n    pip3 install tensorboard\n\n    # \u5b89\u88dd\u5176\u4ed6\u5e38\u7528\u5957\u4ef6\n    pip3 install numpy pandas matplotlib scikit-learn jupyter\n\n    # \u6e05\u7406\n    apt-get clean\n    rm -rf /var/lib/apt/lists/*\n\n%environment\n    export CUDA_HOME=/usr/local/cuda\n    export PATH=$CUDA_HOME/bin:$PATH\n    export LD_LIBRARY_PATH=$CUDA_HOME/lib64:$LD_LIBRARY_PATH\n\n%runscript\n    exec python3 \"$@\"\n\n%labels\n    Author research.team@example.com\n    Version 1.0\n    Description PyTorch\u6df1\u5ea6\u5b78\u7fd2\u74b0\u5883 with CUDA 12.0\n\n%help\n    PyTorch \u6df1\u5ea6\u5b78\u7fd2\u5bb9\u5668\n\n    \u5305\u542b\uff1a\n    - CUDA 12.0\n    - cuDNN 8\n    - PyTorch (with CUDA support)\n    - TensorBoard\n    - Jupyter\n\n    \u4f7f\u7528\u7bc4\u4f8b\uff1a\n        singularity exec --nv pytorch.sif python3 train.py\n</code></pre>"},{"location":"hpc/container/build-image/#2r","title":"\u7bc4\u4f8b 2\uff1aR \u7d71\u8a08\u5206\u6790\u74b0\u5883","text":"<pre><code>Bootstrap: docker\nFrom: rocker/r-ver:4.3.0\n\n%post\n    # \u5b89\u88dd\u7cfb\u7d71\u76f8\u4f9d\u5957\u4ef6\n    apt-get update\n    apt-get install -y libcurl4-openssl-dev libssl-dev libxml2-dev\n\n    # \u5b89\u88dd R \u5957\u4ef6\n    R -e \"install.packages(c('tidyverse', 'ggplot2', 'dplyr', 'caret'), repos='https://cloud.r-project.org/')\"\n\n    # \u6e05\u7406\n    apt-get clean\n    rm -rf /var/lib/apt/lists/*\n\n%environment\n    export LC_ALL=en_US.UTF-8\n    export LANG=en_US.UTF-8\n\n%runscript\n    exec R \"$@\"\n\n%labels\n    Author stats.team@example.com\n    Version 1.0\n    Description R\u7d71\u8a08\u5206\u6790\u74b0\u5883\n\n%help\n    R \u7d71\u8a08\u5206\u6790\u5bb9\u5668\n\n    \u5305\u542b\u5e38\u7528\u7684 R \u5957\u4ef6\uff1a\n    - tidyverse\n    - ggplot2\n    - dplyr\n    - caret\n\n    \u4f7f\u7528\u7bc4\u4f8b\uff1a\n        singularity exec r-stats.sif Rscript analysis.R\n</code></pre>"},{"location":"hpc/container/build-image/#3","title":"\u7bc4\u4f8b 3\uff1a\u751f\u7269\u8cc7\u8a0a\u5206\u6790\u74b0\u5883","text":"<pre><code>Bootstrap: docker\nFrom: continuumio/miniconda3:latest\n\n%files\n    environment.yml /tmp/environment.yml\n\n%post\n    # \u66f4\u65b0 conda\n    conda update -n base -c defaults conda\n\n    # \u5f9e environment.yml \u5efa\u7acb\u74b0\u5883\n    conda env create -f /tmp/environment.yml\n\n    # \u6e05\u7406\n    conda clean --all -y\n    rm /tmp/environment.yml\n\n%environment\n    # \u555f\u52d5 conda \u74b0\u5883\n    export PATH=/opt/conda/envs/bioinfo/bin:$PATH\n\n%runscript\n    exec \"$@\"\n\n%labels\n    Author bioinfo.team@example.com\n    Version 1.0\n    Description \u751f\u7269\u8cc7\u8a0a\u5206\u6790\u74b0\u5883\n\n%help\n    \u751f\u7269\u8cc7\u8a0a\u5206\u6790\u5bb9\u5668\n\n    \u5305\u542b\u5e38\u7528\u7684\u751f\u7269\u8cc7\u8a0a\u5de5\u5177\uff08\u900f\u904e conda \u5b89\u88dd\uff09\n\n    \u4f7f\u7528\u7bc4\u4f8b\uff1a\n        singularity exec bioinfo.sif samtools --version\n</code></pre> <p>\u5c0d\u61c9\u7684 <code>environment.yml</code>\uff1a</p> <pre><code>name: bioinfo\nchannels:\n  - bioconda\n  - conda-forge\n  - defaults\ndependencies:\n  - python=3.10\n  - samtools\n  - bwa\n  - bowtie2\n  - fastqc\n  - multiqc\n  - numpy\n  - pandas\n  - biopython\n</code></pre>"},{"location":"hpc/container/build-image/#sandbox","title":"\u4f7f\u7528 Sandbox \u5efa\u7acb","text":"<p>Sandbox \u662f\u4e00\u500b\u53ef\u5beb\u5165\u7684\u76ee\u9304\uff0c\u65b9\u4fbf\u6e2c\u8a66\u548c\u958b\u767c\u5bb9\u5668\uff1a</p> <pre><code># \u5efa\u7acb sandbox\nsingularity build --sandbox my-container/ docker://ubuntu:22.04\n\n# \u4ee5\u53ef\u5beb\u5165\u6a21\u5f0f\u9032\u5165\u5bb9\u5668\u9032\u884c\u4fee\u6539\nsingularity shell --writable my-container/\n\n# \u5728\u5bb9\u5668\u5167\u9032\u884c\u6e2c\u8a66\u548c\u5b89\u88dd\nSingularity&gt; apt-get update\nSingularity&gt; apt-get install -y python3\nSingularity&gt; exit\n\n# \u5c07 sandbox \u8f49\u63db\u70ba\u6620\u50cf\u6a94\nsingularity build my-container.sif my-container/\n</code></pre>"},{"location":"hpc/container/build-image/#hpc","title":"\u5728 HPC \u74b0\u5883\u4e2d\u5efa\u7acb\u6620\u50cf\u6a94","text":"<p>\u7531\u65bc HPC \u7684\u767b\u5165\u7bc0\u9ede\u901a\u5e38\u6c92\u6709 root \u6b0a\u9650\uff0c\u6709\u4ee5\u4e0b\u5e7e\u7a2e\u65b9\u5f0f\uff1a</p>"},{"location":"hpc/container/build-image/#1-fakeroot","title":"\u65b9\u6cd5 1\uff1a\u4f7f\u7528 --fakeroot","text":"<p>\u5982\u679c\u7cfb\u7d71\u7ba1\u7406\u54e1\u555f\u7528\u4e86 fakeroot \u529f\u80fd\uff1a</p> <pre><code>singularity build --fakeroot my-image.sif my-definition.def\n</code></pre>"},{"location":"hpc/container/build-image/#2-remote","title":"\u65b9\u6cd5 2\uff1a\u4f7f\u7528 --remote","text":"<p>\u900f\u904e Sylabs Cloud \u7684\u9060\u7aef\u5efa\u7acb\u670d\u52d9\uff1a</p> <pre><code># \u9700\u8981\u5148\u8a3b\u518a\u4e26\u767b\u5165 Sylabs Cloud\nsingularity remote login\n\n# \u4f7f\u7528\u9060\u7aef\u5efa\u7acb\nsingularity build --remote my-image.sif my-definition.def\n</code></pre>"},{"location":"hpc/container/build-image/#3_1","title":"\u65b9\u6cd5 3\uff1a\u5728\u672c\u6a5f\u5efa\u7acb\u5f8c\u4e0a\u50b3","text":"<p>\u5728\u6709 root \u6b0a\u9650\u7684\u672c\u6a5f\u96fb\u8166\u6216\u865b\u64ec\u6a5f\u5efa\u7acb\u6620\u50cf\u6a94\uff0c\u518d\u4e0a\u50b3\u5230 HPC\uff1a</p> <pre><code># \u5728\u672c\u6a5f\u5efa\u7acb\nsudo singularity build my-image.sif my-definition.def\n\n# \u4e0a\u50b3\u5230 HPC\nscp my-image.sif username@hpc.server:/path/to/destination/\n</code></pre>"},{"location":"hpc/container/build-image/#_9","title":"\u6e2c\u8a66\u6620\u50cf\u6a94","text":"<p>\u5efa\u7acb\u6620\u50cf\u6a94\u5f8c\uff0c\u61c9\u8a72\u9032\u884c\u6e2c\u8a66\uff1a</p> <pre><code># \u6aa2\u67e5\u6620\u50cf\u6a94\u8cc7\u8a0a\nsingularity inspect my-image.sif\n\n# \u6aa2\u67e5\u6a19\u7c64\nsingularity inspect --labels my-image.sif\n\n# \u6aa2\u67e5\u8aaa\u660e\nsingularity run-help my-image.sif\n\n# \u6e2c\u8a66\u57f7\u884c\nsingularity exec my-image.sif python3 --version\n\n# \u4e92\u52d5\u5f0f\u6e2c\u8a66\nsingularity shell my-image.sif\n</code></pre>"},{"location":"hpc/container/build-image/#_10","title":"\u6700\u4f73\u5be6\u8e10","text":""},{"location":"hpc/container/build-image/#1_1","title":"1. \u4f7f\u7528\u7248\u672c\u6a19\u7c64","text":"<p>\u660e\u78ba\u6307\u5b9a\u57fa\u790e\u6620\u50cf\u6a94\u7684\u7248\u672c\uff1a</p> <pre><code># \u597d\u7684\u505a\u6cd5\nBootstrap: docker\nFrom: ubuntu:22.04\n\n# \u907f\u514d\u4f7f\u7528\nBootstrap: docker\nFrom: ubuntu:latest  # \u7248\u672c\u4e0d\u56fa\u5b9a\uff0c\u53ef\u80fd\u5c0e\u81f4\u91cd\u73fe\u6027\u554f\u984c\n</code></pre>"},{"location":"hpc/container/build-image/#2","title":"2. \u6e05\u7406\u66ab\u5b58\u6a94","text":"<p>\u5728 %post \u5340\u6bb5\u7d50\u675f\u6642\u6e05\u7406\u4e0d\u9700\u8981\u7684\u6a94\u6848\uff1a</p> <pre><code>%post\n    apt-get update\n    apt-get install -y software\n\n    # \u6e05\u7406\n    apt-get clean\n    rm -rf /var/lib/apt/lists/*\n    rm -rf /tmp/*\n</code></pre>"},{"location":"hpc/container/build-image/#3_2","title":"3. \u4f7f\u7528\u74b0\u5883\u8b8a\u6578","text":"<p>\u5c07\u53ef\u80fd\u9700\u8981\u4fee\u6539\u7684\u53c3\u6578\u8a2d\u5b9a\u70ba\u74b0\u5883\u8b8a\u6578\uff1a</p> <pre><code>%environment\n    export APP_VERSION=1.0\n    export DATA_PATH=/data\n    export OUTPUT_PATH=/output\n</code></pre>"},{"location":"hpc/container/build-image/#4","title":"4. \u63d0\u4f9b\u5b8c\u6574\u7684\u8aaa\u660e","text":"<p>\u5728 %help \u5340\u6bb5\u63d0\u4f9b\u6e05\u695a\u7684\u4f7f\u7528\u8aaa\u660e\uff1a</p> <pre><code>%help\n    \u5bb9\u5668\u540d\u7a31\u548c\u7528\u9014\n\n    \u5305\u542b\u7684\u8edf\u9ad4\u7248\u672c\n\n    \u4f7f\u7528\u7bc4\u4f8b\n\n    \u6ce8\u610f\u4e8b\u9805\n</code></pre>"},{"location":"hpc/container/build-image/#5","title":"5. \u56fa\u5b9a\u5957\u4ef6\u7248\u672c","text":"<p>\u5b89\u88dd\u5957\u4ef6\u6642\u6307\u5b9a\u7248\u672c\uff0c\u78ba\u4fdd\u53ef\u91cd\u73fe\u6027\uff1a</p> <pre><code>%post\n    # Python \u5957\u4ef6\u6307\u5b9a\u7248\u672c\n    pip3 install numpy==1.24.0 pandas==2.0.0\n\n    # APT \u5957\u4ef6\u6307\u5b9a\u7248\u672c\n    apt-get install -y python3=3.10.6-1~22.04\n</code></pre>"},{"location":"hpc/container/build-image/#6","title":"6. \u5206\u5c64\u5efa\u7acb","text":"<p>\u5c0d\u65bc\u8907\u96dc\u7684\u74b0\u5883\uff0c\u53ef\u4ee5\u5206\u5c64\u5efa\u7acb\uff1a</p> <pre><code># \u5148\u5efa\u7acb\u57fa\u790e\u6620\u50cf\u6a94\nsingularity build base.sif base.def\n\n# \u518d\u57fa\u65bc\u57fa\u790e\u6620\u50cf\u6a94\u5efa\u7acb\u7279\u5b9a\u61c9\u7528\u7684\u6620\u50cf\u6a94\n</code></pre> <pre><code>Bootstrap: localimage\nFrom: base.sif\n\n%post\n    # \u53ea\u5b89\u88dd\u61c9\u7528\u7279\u5b9a\u7684\u5957\u4ef6\n    pip3 install application-specific-package\n</code></pre>"},{"location":"hpc/container/build-image/#_11","title":"\u5e38\u898b\u554f\u984c","text":"<p>Q: \u5efa\u7acb\u6620\u50cf\u6a94\u6642\u51fa\u73fe\u6b0a\u9650\u932f\u8aa4\u600e\u9ebc\u8fa6\uff1f</p> <p>A: \u5617\u8a66\u4f7f\u7528 <code>--fakeroot</code> \u53c3\u6578\uff0c\u6216\u5728\u672c\u6a5f\u5efa\u7acb\u5f8c\u4e0a\u50b3\u5230 HPC\u3002</p> <p>Q: \u5982\u4f55\u5728\u5bb9\u5668\u4e2d\u4f7f\u7528 GPU\uff1f</p> <p>A: \u4f7f\u7528\u5305\u542b CUDA \u7684\u57fa\u790e\u6620\u50cf\u6a94\uff0c\u4e26\u5728\u57f7\u884c\u6642\u52a0\u4e0a <code>--nv</code> \u53c3\u6578\u3002</p> <p>Q: \u6620\u50cf\u6a94\u53ef\u4ee5\u4fee\u6539\u55ce\uff1f</p> <p>A: .sif \u6a94\u6848\u662f\u552f\u8b80\u7684\u3002\u5982\u9700\u4fee\u6539\uff0c\u9700\u8981\u4f7f\u7528 sandbox \u6216\u91cd\u65b0\u5efa\u7acb\u6620\u50cf\u6a94\u3002</p> <p>Q: \u5982\u4f55\u6e1b\u5c0f\u6620\u50cf\u6a94\u5927\u5c0f\uff1f</p> <p>A: \u6e05\u7406\u4e0d\u9700\u8981\u7684\u6a94\u6848\u3001\u4f7f\u7528\u8f03\u5c0f\u7684\u57fa\u790e\u6620\u50cf\u6a94\u3001\u907f\u514d\u5b89\u88dd\u4e0d\u5fc5\u8981\u7684\u5957\u4ef6\u3002</p> <p>Q: \u53ef\u4ee5\u5728\u5bb9\u5668\u4e2d\u5b89\u88dd conda \u55ce\uff1f</p> <p>A: \u53ef\u4ee5\uff0c\u5efa\u8b70\u4f7f\u7528 miniconda \u4f5c\u70ba\u57fa\u790e\u6620\u50cf\u6a94\uff0c\u6216\u5728 %post \u5340\u6bb5\u4e2d\u5b89\u88dd conda\u3002</p>"},{"location":"hpc/container/build-image/#_12","title":"\u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>Singularity \u5b98\u65b9\u6587\u4ef6</li> <li>Definition File \u5b8c\u6574\u53c3\u8003</li> <li>Docker Hub - \u5c0b\u627e\u57fa\u790e\u6620\u50cf\u6a94</li> <li>NVIDIA NGC - GPU \u512a\u5316\u7684\u6620\u50cf\u6a94</li> </ul>"},{"location":"hpc/container/ngc/","title":"\u4f7f\u7528 NGC \u6620\u50cf\u6a94","text":"<p>NVIDIA GPU Cloud (NGC) \u662f NVIDIA \u63d0\u4f9b\u7684\u5bb9\u5668\u6620\u50cf\u6a94\u5009\u5eab\uff0c\u5305\u542b\u91dd\u5c0d GPU \u512a\u5316\u7684\u6df1\u5ea6\u5b78\u7fd2\u6846\u67b6\u3001HPC \u61c9\u7528\u7a0b\u5f0f\u548c\u79d1\u5b78\u904b\u7b97\u5de5\u5177\u3002\u9019\u4e9b\u6620\u50cf\u6a94\u7d93\u904e NVIDIA \u5de5\u7a0b\u5e2b\u512a\u5316\uff0c\u80fd\u5145\u5206\u767c\u63ee GPU \u7684\u6548\u80fd\u3002</p>"},{"location":"hpc/container/ngc/#ngc_1","title":"\u4ec0\u9ebc\u662f NGC","text":"<p>NGC \u63d0\u4f9b\u4ee5\u4e0b\u985e\u578b\u7684\u5bb9\u5668\u6620\u50cf\u6a94\uff1a</p> <p>\u6df1\u5ea6\u5b78\u7fd2\u6846\u67b6 - PyTorch - TensorFlow - JAX - MXNet - PaddlePaddle</p> <p>\u6a5f\u5668\u5b78\u7fd2\u5de5\u5177 - RAPIDS (GPU \u52a0\u901f\u7684\u8cc7\u6599\u79d1\u5b78) - cuML (GPU \u52a0\u901f\u7684\u6a5f\u5668\u5b78\u7fd2) - NVIDIA Triton Inference Server</p> <p>HPC \u61c9\u7528\u7a0b\u5f0f - GROMACS (\u5206\u5b50\u52d5\u529b\u5b78\u6a21\u64ec) - LAMMPS (\u7d93\u5178\u5206\u5b50\u52d5\u529b\u5b78) - NAMD (\u5206\u5b50\u52d5\u529b\u5b78)</p> <p>\u958b\u767c\u5de5\u5177 - CUDA - cuDNN - TensorRT - NVIDIA HPC SDK</p>"},{"location":"hpc/container/ngc/#ngc_2","title":"NGC \u5bb9\u5668\u7684\u512a\u52e2","text":"<ol> <li>\u6548\u80fd\u512a\u5316\uff1a\u91dd\u5c0d NVIDIA GPU \u9032\u884c\u6df1\u5ea6\u512a\u5316</li> <li>\u7248\u672c\u5339\u914d\uff1a\u78ba\u4fdd CUDA\u3001cuDNN \u7b49\u5143\u4ef6\u7248\u672c\u76f8\u5bb9</li> <li>\u5b9a\u671f\u66f4\u65b0\uff1a\u6bcf\u6708\u66f4\u65b0\uff0c\u5305\u542b\u6700\u65b0\u529f\u80fd\u548c\u5b89\u5168\u4fee\u88dc</li> <li>\u5b8c\u6574\u6e2c\u8a66\uff1a\u7d93\u904e NVIDIA \u5de5\u7a0b\u5718\u968a\u6e2c\u8a66\u9a57\u8b49</li> <li>\u958b\u7bb1\u5373\u7528\uff1a\u7121\u9700\u624b\u52d5\u914d\u7f6e GPU \u76f8\u95dc\u8a2d\u5b9a</li> </ol>"},{"location":"hpc/container/ngc/#ngc_3","title":"\u700f\u89bd NGC \u6620\u50cf\u6a94","text":""},{"location":"hpc/container/ngc/#ngc-catalog","title":"NGC Catalog \u7db2\u7ad9","text":"<p>\u8a2a\u554f NGC Catalog \u700f\u89bd\u6240\u6709\u53ef\u7528\u7684\u5bb9\u5668\u6620\u50cf\u6a94\uff1a</p> <ol> <li>\u9078\u64c7 \"Containers\" \u5206\u985e</li> <li>\u4f7f\u7528\u641c\u5c0b\u529f\u80fd\u627e\u5230\u9700\u8981\u7684\u8edf\u9ad4</li> <li>\u67e5\u770b\u6620\u50cf\u6a94\u7684\u8a73\u7d30\u8cc7\u8a0a\u3001\u7248\u672c\u548c\u4f7f\u7528\u8aaa\u660e</li> </ol>"},{"location":"hpc/container/ngc/#_1","title":"\u6620\u50cf\u6a94\u547d\u540d\u898f\u5247","text":"<p>NGC \u6620\u50cf\u6a94\u7684\u547d\u540d\u9075\u5faa\u4ee5\u4e0b\u683c\u5f0f\uff1a</p> <pre><code>nvcr.io/nvidia/&lt;\u8edf\u9ad4\u540d\u7a31&gt;:&lt;\u7248\u672c\u6a19\u7c64&gt;\n</code></pre> <p>\u5e38\u898b\u7684\u7248\u672c\u6a19\u7c64\u683c\u5f0f\uff1a - <code>YY.MM-py3</code>\uff1a\u5e74\u6708\u7248\u672c\uff0c\u4f8b\u5982 <code>23.12-py3</code> \u8868\u793a 2023 \u5e74 12 \u6708\u7248\u672c - <code>X.Y.Z-cudaXX.X-ubuntuXX.XX</code>\uff1a\u8a73\u7d30\u7248\u672c\u8cc7\u8a0a</p> <p>\u7bc4\u4f8b\uff1a</p> <pre><code>nvcr.io/nvidia/pytorch:23.12-py3\nnvcr.io/nvidia/tensorflow:23.12-tf2-py3\nnvcr.io/nvidia/cuda:12.0.0-base-ubuntu22.04\n</code></pre>"},{"location":"hpc/container/ngc/#ngc_4","title":"\u4e0b\u8f09 NGC \u6620\u50cf\u6a94","text":"<p>:::warning \u6ce8\u610f \u76ee\u524d\u5132\u5b58\u5eab\u529f\u80fd\u6b63\u5728\u5efa\u7f6e\u4e2d\uff0c\u82e5\u6709\u9700\u6c42\u8acb\u5411\u7ba1\u7406\u54e1\u53d6\u5f97 API key\u3002 :::</p>"},{"location":"hpc/container/ngc/#_2","title":"\u57fa\u672c\u4e0b\u8f09\u65b9\u5f0f","text":"<p>\u4f7f\u7528 <code>singularity pull</code> \u6307\u4ee4\u4e0b\u8f09 NGC \u6620\u50cf\u6a94\uff1a</p> <pre><code># \u57fa\u672c\u8a9e\u6cd5\nsingularity pull docker://nvcr.io/nvidia/&lt;\u8edf\u9ad4\u540d\u7a31&gt;:&lt;\u7248\u672c&gt;\n\n# \u7bc4\u4f8b\uff1a\u4e0b\u8f09 PyTorch \u5bb9\u5668\nsingularity pull docker://nvcr.io/nvidia/pytorch:23.12-py3\n\n# \u6703\u7522\u751f pytorch_23.12-py3.sif \u6a94\u6848\n</code></pre>"},{"location":"hpc/container/ngc/#_3","title":"\u6307\u5b9a\u8f38\u51fa\u6a94\u540d","text":"<pre><code># \u81ea\u8a02\u8f38\u51fa\u6a94\u540d\nsingularity pull pytorch-2312.sif docker://nvcr.io/nvidia/pytorch:23.12-py3\n</code></pre>"},{"location":"hpc/container/ngc/#ngc_5","title":"\u5e38\u7528 NGC \u6620\u50cf\u6a94\u4e0b\u8f09\u7bc4\u4f8b","text":""},{"location":"hpc/container/ngc/#pytorch","title":"PyTorch","text":"<pre><code># \u6700\u65b0\u7684 PyTorch \u5bb9\u5668\nsingularity pull docker://nvcr.io/nvidia/pytorch:23.12-py3\n\n# \u6aa2\u8996\u5bb9\u5668\u8cc7\u8a0a\nsingularity inspect pytorch_23.12-py3.sif\n</code></pre>"},{"location":"hpc/container/ngc/#tensorflow","title":"TensorFlow","text":"<pre><code># TensorFlow 2.x\nsingularity pull docker://nvcr.io/nvidia/tensorflow:23.12-tf2-py3\n\n# TensorFlow 1.x (\u820a\u7248)\nsingularity pull docker://nvcr.io/nvidia/tensorflow:23.12-tf1-py3\n</code></pre>"},{"location":"hpc/container/ngc/#cuda","title":"CUDA \u958b\u767c\u74b0\u5883","text":"<pre><code># CUDA 12.0 \u57fa\u790e\u74b0\u5883\nsingularity pull docker://nvcr.io/nvidia/cuda:12.0.0-base-ubuntu22.04\n\n# CUDA 12.0 \u958b\u767c\u74b0\u5883 (\u5305\u542b\u7de8\u8b6f\u5de5\u5177)\nsingularity pull docker://nvcr.io/nvidia/cuda:12.0.0-devel-ubuntu22.04\n\n# CUDA 12.0 \u57f7\u884c\u74b0\u5883\nsingularity pull docker://nvcr.io/nvidia/cuda:12.0.0-runtime-ubuntu22.04\n</code></pre>"},{"location":"hpc/container/ngc/#rapids","title":"RAPIDS (\u8cc7\u6599\u79d1\u5b78)","text":"<pre><code># RAPIDS \u5b8c\u6574\u74b0\u5883\nsingularity pull docker://nvcr.io/nvidia/rapidsai/rapidsai:23.12-cuda12.0-runtime-ubuntu22.04\n</code></pre>"},{"location":"hpc/container/ngc/#ngc_6","title":"NGC \u6620\u50cf\u6a94\u7248\u672c\u9078\u64c7","text":""},{"location":"hpc/container/ngc/#_4","title":"\u9078\u64c7\u9069\u7576\u7248\u672c\u7684\u5efa\u8b70","text":"<p>1. \u4f7f\u7528\u6700\u65b0\u7a69\u5b9a\u7248\u672c - \u9069\u5408\u65b0\u5c08\u6848 - \u7372\u5f97\u6700\u65b0\u529f\u80fd\u548c\u6548\u80fd\u6539\u9032 - \u7bc4\u4f8b\uff1a<code>pytorch:23.12-py3</code></p> <p>2. \u56fa\u5b9a\u7248\u672c\u865f - \u9069\u5408\u9700\u8981\u91cd\u73fe\u7814\u7a76\u7d50\u679c\u7684\u60c5\u6cc1 - \u78ba\u4fdd\u74b0\u5883\u4e00\u81f4\u6027 - \u7bc4\u4f8b\uff1a<code>pytorch:23.08-py3</code></p> <p>3. \u6aa2\u67e5 CUDA \u7248\u672c\u76f8\u5bb9\u6027 - \u78ba\u8a8d HPC \u7cfb\u7d71\u7684 GPU \u9a45\u52d5\u7248\u672c - \u9078\u64c7\u76f8\u5bb9\u7684 CUDA \u7248\u672c</p>"},{"location":"hpc/container/ngc/#_5","title":"\u67e5\u770b\u6620\u50cf\u6a94\u8a73\u7d30\u8cc7\u8a0a","text":"<p>\u5728 NGC Catalog \u7db2\u7ad9\u4e0a\uff0c\u6bcf\u500b\u5bb9\u5668\u9801\u9762\u90fd\u6703\u63d0\u4f9b\uff1a</p> <ul> <li>Release Notes\uff1a\u7248\u672c\u66f4\u65b0\u8aaa\u660e</li> <li>Framework Version\uff1a\u5305\u542b\u7684\u8edf\u9ad4\u7248\u672c</li> <li>CUDA Version\uff1aCUDA \u5de5\u5177\u5305\u7248\u672c</li> <li>Container Size\uff1a\u6620\u50cf\u6a94\u5927\u5c0f</li> <li>Pull Command\uff1a\u4e0b\u8f09\u6307\u4ee4</li> </ul>"},{"location":"hpc/container/ngc/#ngc-api-key","title":"\u4f7f\u7528 NGC API Key","text":"<p>\u67d0\u4e9b\u79c1\u6709\u6216\u65e9\u671f\u5b58\u53d6\u7684\u5bb9\u5668\u53ef\u80fd\u9700\u8981 NGC API Key\u3002</p>"},{"location":"hpc/container/ngc/#api-key","title":"\u53d6\u5f97 API Key","text":"<ol> <li>\u524d\u5f80 NGC \u7db2\u7ad9</li> <li>\u8a3b\u518a\u6216\u767b\u5165\u5e33\u865f</li> <li>\u9032\u5165 \"Setup\" &gt; \"Get API Key\"</li> <li>\u7522\u751f\u65b0\u7684 API Key</li> </ol>"},{"location":"hpc/container/ngc/#api-key_1","title":"\u4f7f\u7528 API Key \u4e0b\u8f09","text":"<pre><code># \u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578\nexport SINGULARITY_DOCKER_USERNAME='$oauthtoken'\nexport SINGULARITY_DOCKER_PASSWORD='your_api_key_here'\n\n# \u4e0b\u8f09\u9700\u8981\u8a8d\u8b49\u7684\u6620\u50cf\u6a94\nsingularity pull docker://nvcr.io/nvidia/private-image:tag\n</code></pre> <p>:::info \u63d0\u793a \u5728 HPC \u74b0\u5883\u4e2d\uff0c\u5efa\u8b70\u5c07 API Key \u5132\u5b58\u5728\u5bb6\u76ee\u9304\u7684\u8a2d\u5b9a\u6a94\u4e2d\uff0c\u907f\u514d\u5728\u6307\u4ee4\u4e2d\u76f4\u63a5\u986f\u793a\u3002 :::</p>"},{"location":"hpc/container/ngc/#_6","title":"\u6e2c\u8a66\u4e0b\u8f09\u7684\u6620\u50cf\u6a94","text":"<p>\u4e0b\u8f09\u5b8c\u6210\u5f8c\uff0c\u61c9\u8a72\u6e2c\u8a66\u6620\u50cf\u6a94\u662f\u5426\u6b63\u5e38\u904b\u4f5c\uff1a</p>"},{"location":"hpc/container/ngc/#_7","title":"\u6aa2\u67e5\u6620\u50cf\u6a94\u8cc7\u8a0a","text":"<pre><code># \u67e5\u770b\u6620\u50cf\u6a94\u57fa\u672c\u8cc7\u8a0a\nsingularity inspect pytorch_23.12-py3.sif\n\n# \u67e5\u770b\u6a19\u7c64\u8cc7\u8a0a\nsingularity inspect --labels pytorch_23.12-py3.sif\n\n# \u67e5\u770b\u8aaa\u660e\u6587\u4ef6\nsingularity run-help pytorch_23.12-py3.sif\n</code></pre>"},{"location":"hpc/container/ngc/#_8","title":"\u6e2c\u8a66\u5bb9\u5668\u529f\u80fd","text":"<pre><code># \u6aa2\u67e5 Python \u7248\u672c\nsingularity exec pytorch_23.12-py3.sif python --version\n\n# \u6aa2\u67e5 PyTorch \u7248\u672c\u548c CUDA \u53ef\u7528\u6027\nsingularity exec pytorch_23.12-py3.sif python -c \"import torch; print(f'PyTorch: {torch.__version__}'); print(f'CUDA available: {torch.cuda.is_available()}')\"\n\n# \u6aa2\u67e5 GPU (\u9700\u8981\u5728\u6709 GPU \u7684\u7bc0\u9ede\u4e0a\u57f7\u884c)\nsingularity exec --nv pytorch_23.12-py3.sif nvidia-smi\n</code></pre>"},{"location":"hpc/container/ngc/#_9","title":"\u4e92\u52d5\u5f0f\u6e2c\u8a66","text":"<pre><code># \u9032\u5165\u5bb9\u5668\u7684 shell\nsingularity shell --nv pytorch_23.12-py3.sif\n\n# \u5728\u5bb9\u5668\u5167\u6e2c\u8a66\nSingularity&gt; python\n&gt;&gt;&gt; import torch\n&gt;&gt;&gt; print(torch.__version__)\n&gt;&gt;&gt; print(torch.cuda.is_available())\n&gt;&gt;&gt; exit()\nSingularity&gt; exit\n</code></pre>"},{"location":"hpc/container/ngc/#slurm","title":"\u6574\u5408\u5230 Slurm \u5de5\u4f5c","text":"<p>\u5c07 NGC \u5bb9\u5668\u6574\u5408\u5230\u6279\u6b21\u5de5\u4f5c\u4e2d\uff1a</p> <pre><code>#!/bin/bash\n#SBATCH -J pytorch_training\n#SBATCH -p gpu\n#SBATCH --gres=gpu:1\n#SBATCH -c 8\n#SBATCH -t 24:00:00\n#SBATCH -o output_%j.txt\n#SBATCH -e error_%j.txt\n\n# \u8a2d\u5b9a\u5bb9\u5668\u8def\u5f91\nCONTAINER=\"/path/to/pytorch_23.12-py3.sif\"\n\n# \u4f7f\u7528\u5bb9\u5668\u57f7\u884c\u8a13\u7df4\u7a0b\u5f0f\nsingularity exec --nv ${CONTAINER} python train.py \\\n    --data /data/dataset \\\n    --epochs 100 \\\n    --batch-size 64\n\n# \u6216\u4f7f\u7528\u591a\u500b GPU\n# singularity exec --nv ${CONTAINER} python -m torch.distributed.launch \\\n#     --nproc_per_node=4 train.py\n</code></pre>"},{"location":"hpc/container/ngc/#ngc_7","title":"\u5e38\u898b NGC \u5bb9\u5668\u4f7f\u7528\u7bc4\u4f8b","text":""},{"location":"hpc/container/ngc/#pytorch_1","title":"PyTorch \u6df1\u5ea6\u5b78\u7fd2\u8a13\u7df4","text":"<pre><code># \u4e0b\u8f09 PyTorch \u5bb9\u5668\nsingularity pull docker://nvcr.io/nvidia/pytorch:23.12-py3\n\n# \u4e92\u52d5\u5f0f\u958b\u767c\nsrun -p gpu --gres=gpu:1 -c 8 --pty singularity shell --nv pytorch_23.12-py3.sif\n\n# \u6279\u6b21\u8a13\u7df4\nsingularity exec --nv pytorch_23.12-py3.sif python train.py\n</code></pre>"},{"location":"hpc/container/ngc/#tensorflow_1","title":"TensorFlow \u6a21\u578b\u8a13\u7df4","text":"<pre><code># \u4e0b\u8f09 TensorFlow \u5bb9\u5668\nsingularity pull docker://nvcr.io/nvidia/tensorflow:23.12-tf2-py3\n\n# \u57f7\u884c\u8a13\u7df4\nsingularity exec --nv tensorflow_23.12-tf2-py3.sif python model_train.py\n</code></pre>"},{"location":"hpc/container/ngc/#rapids_1","title":"RAPIDS \u8cc7\u6599\u5206\u6790","text":"<pre><code># \u4e0b\u8f09 RAPIDS \u5bb9\u5668\nsingularity pull docker://nvcr.io/nvidia/rapidsai/rapidsai:23.12-cuda12.0-runtime-ubuntu22.04\n\n# \u57f7\u884c GPU \u52a0\u901f\u7684\u8cc7\u6599\u5206\u6790\nsingularity exec --nv rapidsai_23.12-cuda12.0-runtime-ubuntu22.04.sif python analysis.py\n</code></pre>"},{"location":"hpc/container/ngc/#jupyter-notebook","title":"Jupyter Notebook","text":"<p>\u8a31\u591a NGC \u5bb9\u5668\u5167\u5efa Jupyter\uff0c\u53ef\u4ee5\u555f\u52d5 Notebook \u670d\u52d9\uff1a</p> <pre><code># \u5728\u8a08\u7b97\u7bc0\u9ede\u4e0a\u555f\u52d5 Jupyter\nsrun -p gpu --gres=gpu:1 -c 8 --pty singularity exec --nv pytorch_23.12-py3.sif \\\n    jupyter notebook --ip=0.0.0.0 --port=8888 --no-browser\n</code></pre>"},{"location":"hpc/container/ngc/#_10","title":"\u6620\u50cf\u6a94\u7ba1\u7406\u5efa\u8b70","text":""},{"location":"hpc/container/ngc/#_11","title":"\u5132\u5b58\u4f4d\u7f6e","text":"<p>\u5efa\u8b70\u5c07\u5e38\u7528\u7684\u6620\u50cf\u6a94\u5132\u5b58\u5728\u5c08\u6848\u76ee\u9304\u6216\u5171\u4eab\u7a7a\u9593\uff1a</p> <pre><code># \u5728\u5c08\u6848\u76ee\u9304\u5efa\u7acb containers \u8cc7\u6599\u593e\nmkdir -p ~/projects/myproject/containers\n\n# \u4e0b\u8f09\u6620\u50cf\u6a94\u5230\u6307\u5b9a\u4f4d\u7f6e\ncd ~/projects/myproject/containers\nsingularity pull docker://nvcr.io/nvidia/pytorch:23.12-py3\n</code></pre>"},{"location":"hpc/container/ngc/#_12","title":"\u7248\u672c\u7ba1\u7406","text":"<p>\u70ba\u6620\u50cf\u6a94\u5efa\u7acb\u6709\u610f\u7fa9\u7684\u547d\u540d\uff1a</p> <pre><code># \u5305\u542b\u65e5\u671f\u548c\u5c08\u6848\u8cc7\u8a0a\nsingularity pull pytorch-2312-project-v1.sif docker://nvcr.io/nvidia/pytorch:23.12-py3\n\n# \u6216\u4f7f\u7528\u8edf\u9023\u7d50\u7ba1\u7406\u7248\u672c\nln -s pytorch_23.12-py3.sif pytorch-current.sif\n</code></pre>"},{"location":"hpc/container/ngc/#_13","title":"\u5b9a\u671f\u66f4\u65b0","text":"<p>\u5b9a\u671f\u6aa2\u67e5\u4e26\u66f4\u65b0\u6620\u50cf\u6a94\uff1a</p> <pre><code># \u4e0b\u8f09\u65b0\u7248\u672c\nsingularity pull pytorch_24.01-py3.sif docker://nvcr.io/nvidia/pytorch:24.01-py3\n\n# \u6e2c\u8a66\u65b0\u7248\u672c\nsingularity exec --nv pytorch_24.01-py3.sif python test_script.py\n\n# \u78ba\u8a8d\u7121\u8aa4\u5f8c\u66ff\u63db\u820a\u7248\u672c\n</code></pre>"},{"location":"hpc/container/ngc/#_14","title":"\u5e38\u898b\u554f\u984c","text":"<p>Q: NGC \u5bb9\u5668\u9700\u8981\u8a3b\u518a\u5e33\u865f\u55ce\uff1f</p> <p>A: \u5927\u90e8\u5206\u516c\u958b\u7684\u5bb9\u5668\u4e0d\u9700\u8981\u8a3b\u518a\u5373\u53ef\u4e0b\u8f09\uff0c\u4f46\u5efa\u8b70\u8a3b\u518a\u4ee5\u5b58\u53d6\u5b8c\u6574\u7684\u8cc7\u6e90\u548c\u6587\u4ef6\u3002</p> <p>Q: \u5982\u4f55\u9078\u64c7 PyTorch \u6216 TensorFlow \u7684\u7248\u672c\uff1f</p> <p>A: \u5efa\u8b70\u5148\u67e5\u770b NGC Catalog \u4e0a\u7684 Release Notes\uff0c\u4e86\u89e3\u5404\u7248\u672c\u5305\u542b\u7684\u6846\u67b6\u7248\u672c\u548c CUDA \u7248\u672c\uff0c\u9078\u64c7\u7b26\u5408\u9700\u6c42\u7684\u7248\u672c\u3002</p> <p>Q: NGC \u5bb9\u5668\u7684\u6620\u50cf\u6a94\u5f88\u5927\uff0c\u4e0b\u8f09\u5f88\u6162\u600e\u9ebc\u8fa6\uff1f</p> <p>A: \u53ef\u4ee5\u9078\u64c7\u8f03\u5c0f\u7684\u57fa\u790e\u7248\u672c\uff0c\u6216\u5728\u7db2\u8def\u8f03\u597d\u7684\u6642\u6bb5\u4e0b\u8f09\u3002\u4e5f\u53ef\u4ee5\u8003\u616e\u5148\u5728\u672c\u6a5f\u4e0b\u8f09\u5f8c\u4e0a\u50b3\u5230 HPC\u3002</p> <p>Q: \u53ef\u4ee5\u5728 NGC \u5bb9\u5668\u4e2d\u5b89\u88dd\u984d\u5916\u7684 Python \u5957\u4ef6\u55ce\uff1f</p> <p>A: \u5bb9\u5668\u5167\u7684\u6a94\u6848\u7cfb\u7d71\u662f\u552f\u8b80\u7684\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528 <code>pip install --user</code> \u5b89\u88dd\u5230\u4f7f\u7528\u8005\u76ee\u9304\uff0c\u6216\u5efa\u7acb\u81ea\u8a02\u7684\u5bb9\u5668\u6620\u50cf\u6a94\u3002</p> <p>Q: NGC \u5bb9\u5668\u652f\u63f4\u591a GPU \u8a13\u7df4\u55ce\uff1f</p> <p>A: \u652f\u63f4\uff0cNGC \u5bb9\u5668\u5167\u5efa\u591a GPU \u652f\u63f4\u3002\u4f7f\u7528\u6642\u9700\u8981\u5728 Slurm \u8173\u672c\u4e2d\u7533\u8acb\u591a\u500b GPU\uff0c\u4e26\u4f7f\u7528\u76f8\u61c9\u7684\u5206\u6563\u5f0f\u8a13\u7df4\u65b9\u5f0f\u3002</p>"},{"location":"hpc/container/ngc/#_15","title":"\u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>NGC Catalog - NVIDIA GPU Cloud \u6620\u50cf\u6a94\u76ee\u9304</li> <li>NGC \u6587\u4ef6 - NGC \u4f7f\u7528\u6587\u4ef6</li> <li>PyTorch \u5bb9\u5668\u8aaa\u660e - PyTorch \u5bb9\u5668\u8a73\u7d30\u8cc7\u8a0a</li> <li>TensorFlow \u5bb9\u5668\u8aaa\u660e - TensorFlow \u5bb9\u5668\u8a73\u7d30\u8cc7\u8a0a</li> </ul>"},{"location":"hpc/container/run/","title":"\u57f7\u884c\u5bb9\u5668","text":"<p>\u672c\u7ae0\u7bc0\u8aaa\u660e\u5982\u4f55\u5728 HPC \u74b0\u5883\u4e2d\u57f7\u884c\u5bb9\u5668\u3002\u6211\u5011\u652f\u63f4\u5169\u7a2e\u5bb9\u5668\u57f7\u884c\u5de5\u5177\uff1aSingularity \u548c Enroot\uff0c\u5404\u6709\u4e0d\u540c\u7684\u7279\u9ede\u548c\u4f7f\u7528\u60c5\u5883\u3002</p>"},{"location":"hpc/container/run/#_2","title":"\u5bb9\u5668\u57f7\u884c\u5de5\u5177\u6bd4\u8f03","text":"\u7279\u6027 Singularity Enroot \u6620\u50cf\u6a94\u683c\u5f0f .sif (\u55ae\u4e00\u6a94\u6848) \u76ee\u9304\u7d50\u69cb \u555f\u52d5\u901f\u5ea6 \u5feb \u66f4\u5feb \u5132\u5b58\u7a7a\u9593 \u6620\u50cf\u6a94\u8f03\u5927 \u53ef\u5171\u4eab\u5c64\u7d1a\uff0c\u7bc0\u7701\u7a7a\u9593 \u4f7f\u7528\u8907\u96dc\u5ea6 \u7c21\u55ae \u7a0d\u8907\u96dc \u9069\u5408\u60c5\u5883 \u4e00\u822c\u7528\u9014\u3001\u53ef\u651c\u6027 \u5927\u91cf\u91cd\u8907\u57f7\u884c\u3001Slurm \u6574\u5408"},{"location":"hpc/container/run/#singularity","title":"Singularity \u57f7\u884c\u65b9\u5f0f","text":"<p>Singularity \u662f\u6700\u5e38\u7528\u7684 HPC \u5bb9\u5668\u5de5\u5177\uff0c\u63d0\u4f9b\u7c21\u55ae\u76f4\u89c0\u7684\u4f7f\u7528\u65b9\u5f0f\u3002</p>"},{"location":"hpc/container/run/#_3","title":"\u57fa\u672c\u57f7\u884c\u6a21\u5f0f","text":""},{"location":"hpc/container/run/#1-exec-","title":"1. exec - \u57f7\u884c\u6307\u5b9a\u6307\u4ee4","text":"<p>\u5728\u5bb9\u5668\u4e2d\u57f7\u884c\u55ae\u4e00\u6307\u4ee4\uff1a</p> <pre><code># \u57fa\u672c\u8a9e\u6cd5\nsingularity exec [\u9078\u9805] &lt;\u6620\u50cf\u6a94&gt; &lt;\u6307\u4ee4&gt;\n\n# \u7bc4\u4f8b\uff1a\u57f7\u884c Python \u8173\u672c\nsingularity exec pytorch.sif python train.py\n\n# \u7bc4\u4f8b\uff1a\u67e5\u770b\u5bb9\u5668\u5167\u7684 Python \u7248\u672c\nsingularity exec pytorch.sif python --version\n</code></pre>"},{"location":"hpc/container/run/#2-shell-shell","title":"2. shell - \u4e92\u52d5\u5f0f Shell","text":"<p>\u9032\u5165\u5bb9\u5668\u7684\u4e92\u52d5\u5f0f\u74b0\u5883\uff1a</p> <pre><code># \u57fa\u672c\u8a9e\u6cd5\nsingularity shell [\u9078\u9805] &lt;\u6620\u50cf\u6a94&gt;\n\n# \u7bc4\u4f8b\uff1a\u9032\u5165\u5bb9\u5668\nsingularity shell pytorch.sif\n\n# \u5728\u5bb9\u5668\u5167\u64cd\u4f5c\nSingularity&gt; python --version\nSingularity&gt; pip list\nSingularity&gt; exit\n</code></pre>"},{"location":"hpc/container/run/#3-run-","title":"3. run - \u57f7\u884c\u9810\u8a2d\u6307\u4ee4","text":"<p>\u57f7\u884c\u5bb9\u5668\u5b9a\u7fa9\u7684\u9810\u8a2d\u6307\u4ee4\uff08runscript\uff09\uff1a</p> <pre><code># \u57fa\u672c\u8a9e\u6cd5\nsingularity run [\u9078\u9805] &lt;\u6620\u50cf\u6a94&gt; [\u53c3\u6578]\n\n# \u7bc4\u4f8b\nsingularity run pytorch.sif --help\n</code></pre>"},{"location":"hpc/container/run/#_4","title":"\u5e38\u7528\u9078\u9805","text":""},{"location":"hpc/container/run/#gpu","title":"GPU \u652f\u63f4","text":"<p>\u4f7f\u7528 <code>--nv</code> \u9078\u9805\u8b93\u5bb9\u5668\u5b58\u53d6 NVIDIA GPU\uff1a</p> <pre><code># \u555f\u7528 GPU \u652f\u63f4\nsingularity exec --nv pytorch.sif python train.py\n\n# \u6aa2\u67e5 GPU \u662f\u5426\u53ef\u7528\nsingularity exec --nv pytorch.sif nvidia-smi\n</code></pre>"},{"location":"hpc/container/run/#_5","title":"\u7d81\u5b9a\u639b\u8f09\u76ee\u9304","text":"<p>\u4f7f\u7528 <code>--bind</code> \u6216 <code>-B</code> \u5c07\u4e3b\u6a5f\u76ee\u9304\u639b\u8f09\u5230\u5bb9\u5668\u4e2d\uff1a</p> <pre><code># \u57fa\u672c\u8a9e\u6cd5\nsingularity exec --bind &lt;\u4e3b\u6a5f\u8def\u5f91&gt;:&lt;\u5bb9\u5668\u8def\u5f91&gt; &lt;\u6620\u50cf\u6a94&gt; &lt;\u6307\u4ee4&gt;\n\n# \u7bc4\u4f8b\uff1a\u639b\u8f09\u8cc7\u6599\u76ee\u9304\nsingularity exec --bind /data:/data pytorch.sif python train.py\n\n# \u639b\u8f09\u591a\u500b\u76ee\u9304\nsingularity exec \\\n    --bind /data:/data \\\n    --bind /scratch:/scratch \\\n    pytorch.sif python train.py\n\n# \u7c21\u5beb\u5f62\u5f0f\nsingularity exec -B /data:/data,/scratch:/scratch pytorch.sif python train.py\n</code></pre> <p>\u9810\u8a2d\u60c5\u6cc1\u4e0b\uff0cSingularity \u6703\u81ea\u52d5\u639b\u8f09\uff1a - \u7576\u524d\u5de5\u4f5c\u76ee\u9304 - \u4f7f\u7528\u8005\u7684\u5bb6\u76ee\u9304 - <code>/tmp</code> \u76ee\u9304</p>"},{"location":"hpc/container/run/#_6","title":"\u74b0\u5883\u8b8a\u6578","text":"<p>\u8a2d\u5b9a\u5bb9\u5668\u5167\u7684\u74b0\u5883\u8b8a\u6578\uff1a</p> <pre><code># \u4f7f\u7528 --env \u9078\u9805\nsingularity exec --env CUDA_VISIBLE_DEVICES=0 pytorch.sif python train.py\n\n# \u4f7f\u7528 --env-file \u5f9e\u6a94\u6848\u8b80\u53d6\nsingularity exec --env-file env.txt pytorch.sif python train.py\n\n# \u6216\u76f4\u63a5\u5728\u6307\u4ee4\u524d\u8a2d\u5b9a\nCUDA_VISIBLE_DEVICES=0 singularity exec pytorch.sif python train.py\n</code></pre>"},{"location":"hpc/container/run/#_7","title":"\u8986\u5beb\u5de5\u4f5c\u76ee\u9304","text":"<p>\u4f7f\u7528 <code>--pwd</code> \u8a2d\u5b9a\u5bb9\u5668\u5167\u7684\u5de5\u4f5c\u76ee\u9304\uff1a</p> <pre><code>singularity exec --pwd /app pytorch.sif python train.py\n</code></pre>"},{"location":"hpc/container/run/#_8","title":"\u4f7f\u7528\u7279\u5b9a\u7684\u66ab\u5b58\u76ee\u9304","text":"<pre><code># \u8a2d\u5b9a\u66ab\u5b58\u76ee\u9304\nsingularity exec --scratch /scratch/user pytorch.sif python train.py\n</code></pre>"},{"location":"hpc/container/run/#singularity_1","title":"Singularity \u5b8c\u6574\u7bc4\u4f8b","text":""},{"location":"hpc/container/run/#1","title":"\u7bc4\u4f8b 1\uff1a\u57fa\u672c\u8a13\u7df4\u4efb\u52d9","text":"<pre><code># \u57f7\u884c\u6df1\u5ea6\u5b78\u7fd2\u8a13\u7df4\nsingularity exec --nv \\\n    --bind /data/dataset:/data \\\n    --bind /results:/output \\\n    --env OMP_NUM_THREADS=4 \\\n    pytorch.sif python train.py \\\n        --data /data \\\n        --output /output \\\n        --epochs 100\n</code></pre>"},{"location":"hpc/container/run/#2","title":"\u7bc4\u4f8b 2\uff1a\u4e92\u52d5\u5f0f\u958b\u767c","text":"<pre><code># \u4f7f\u7528 srun \u5728\u8a08\u7b97\u7bc0\u9ede\u4e0a\u555f\u52d5\u4e92\u52d5\u5f0f\u5bb9\u5668\nsrun -p gpu --gres=gpu:1 -c 8 --mem=32G --pty \\\n    singularity shell --nv \\\n    --bind /data:/data \\\n    pytorch.sif\n</code></pre>"},{"location":"hpc/container/run/#3slurm","title":"\u7bc4\u4f8b 3\uff1aSlurm \u6279\u6b21\u5de5\u4f5c","text":"<pre><code>#!/bin/bash\n#SBATCH -J container_job\n#SBATCH -p gpu\n#SBATCH --gres=gpu:1\n#SBATCH -c 8\n#SBATCH --mem=32G\n#SBATCH -t 24:00:00\n#SBATCH -o logs/output_%j.txt\n#SBATCH -e logs/error_%j.txt\n\n# \u8a2d\u5b9a\u8b8a\u6578\nCONTAINER=\"/path/to/pytorch.sif\"\nDATA_DIR=\"/data/dataset\"\nOUTPUT_DIR=\"/results/${SLURM_JOB_ID}\"\n\n# \u5efa\u7acb\u8f38\u51fa\u76ee\u9304\nmkdir -p ${OUTPUT_DIR}\n\n# \u57f7\u884c\u8a13\u7df4\nsingularity exec --nv \\\n    --bind ${DATA_DIR}:/data \\\n    --bind ${OUTPUT_DIR}:/output \\\n    ${CONTAINER} python train.py \\\n        --data /data \\\n        --output /output \\\n        --epochs 100 \\\n        --batch-size 64\n\necho \"Job completed at $(date)\"\n</code></pre>"},{"location":"hpc/container/run/#enroot","title":"Enroot \u57f7\u884c\u65b9\u5f0f","text":"<p>Enroot \u662f NVIDIA \u958b\u767c\u7684\u5bb9\u5668\u5de5\u5177\uff0c\u7279\u5225\u9069\u5408\u8207 Slurm \u6574\u5408\u4f7f\u7528\uff0c\u63d0\u4f9b\u66f4\u5feb\u7684\u555f\u52d5\u901f\u5ea6\u3002</p>"},{"location":"hpc/container/run/#enroot_1","title":"Enroot \u57fa\u672c\u6982\u5ff5","text":"<p>Enroot \u4f7f\u7528\u300c\u5bb9\u5668\u6620\u50cf\u300d\u548c\u300c\u5bb9\u5668\u5be6\u4f8b\u300d\u7684\u6982\u5ff5\uff1a - \u6620\u50cf\uff08Image\uff09\uff1a\u5f9e Docker Hub \u6216\u6a94\u6848\u532f\u5165\u7684\u5bb9\u5668\u6620\u50cf - \u5bb9\u5668\uff08Container\uff09\uff1a\u5f9e\u6620\u50cf\u5efa\u7acb\u7684\u53ef\u57f7\u884c\u5be6\u4f8b</p>"},{"location":"hpc/container/run/#_9","title":"\u6620\u50cf\u7ba1\u7406","text":""},{"location":"hpc/container/run/#_10","title":"\u532f\u5165\u6620\u50cf","text":"<pre><code># \u5f9e Docker Hub \u532f\u5165\nenroot import docker://nvcr.io/nvidia/pytorch:23.12-py3\n\n# \u6703\u7522\u751f nvidia+pytorch+23.12-py3.sqsh \u6a94\u6848\n</code></pre>"},{"location":"hpc/container/run/#_11","title":"\u5217\u51fa\u5df2\u532f\u5165\u7684\u6620\u50cf","text":"<pre><code>enroot list\n</code></pre>"},{"location":"hpc/container/run/#_12","title":"\u522a\u9664\u6620\u50cf","text":"<pre><code>enroot remove nvidia+pytorch+23.12-py3.sqsh\n</code></pre>"},{"location":"hpc/container/run/#_13","title":"\u5efa\u7acb\u548c\u57f7\u884c\u5bb9\u5668","text":""},{"location":"hpc/container/run/#_14","title":"\u57fa\u672c\u57f7\u884c","text":"<pre><code># \u76f4\u63a5\u5f9e\u6620\u50cf\u57f7\u884c\u6307\u4ee4\nenroot start \\\n    --root \\\n    --rw \\\n    nvidia+pytorch+23.12-py3.sqsh \\\n    python --version\n</code></pre>"},{"location":"hpc/container/run/#_15","title":"\u5efa\u7acb\u6301\u4e45\u5316\u5bb9\u5668","text":"<p>\u5efa\u7acb\u53ef\u91cd\u8907\u4f7f\u7528\u7684\u5bb9\u5668\u5be6\u4f8b\uff1a</p> <pre><code># \u5f9e\u6620\u50cf\u5efa\u7acb\u5bb9\u5668\nenroot create --name pytorch-container nvidia+pytorch+23.12-py3.sqsh\n\n# \u555f\u52d5\u4e26\u57f7\u884c\u6307\u4ee4\nenroot start pytorch-container python train.py\n\n# \u5217\u51fa\u6240\u6709\u5bb9\u5668\nenroot list\n\n# \u522a\u9664\u5bb9\u5668\nenroot remove pytorch-container\n</code></pre>"},{"location":"hpc/container/run/#enroot_2","title":"Enroot \u5e38\u7528\u9078\u9805","text":""},{"location":"hpc/container/run/#_16","title":"\u639b\u8f09\u76ee\u9304","text":"<pre><code># \u4f7f\u7528 --mount \u639b\u8f09\u76ee\u9304\nenroot start \\\n    --mount /data:/data \\\n    --mount /results:/output \\\n    pytorch-container python train.py\n</code></pre>"},{"location":"hpc/container/run/#_17","title":"\u74b0\u5883\u8b8a\u6578","text":"<pre><code># \u4f7f\u7528 --env \u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578\nenroot start \\\n    --env CUDA_VISIBLE_DEVICES=0 \\\n    --env OMP_NUM_THREADS=4 \\\n    pytorch-container python train.py\n</code></pre>"},{"location":"hpc/container/run/#_18","title":"\u53ef\u5beb\u5165\u6a21\u5f0f","text":"<pre><code># \u4f7f\u7528 --rw \u8b93\u5bb9\u5668\u53ef\u5beb\u5165\nenroot start --rw pytorch-container python train.py\n</code></pre>"},{"location":"hpc/container/run/#enroot-slurm","title":"Enroot \u8207 Slurm \u6574\u5408","text":"<p>Enroot \u7279\u5225\u8a2d\u8a08\u7528\u65bc\u8207 Slurm \u6574\u5408\uff0c\u900f\u904e <code>pyxis</code> \u5916\u639b\u53ef\u4ee5\u66f4\u65b9\u4fbf\u5730\u4f7f\u7528\u3002</p>"},{"location":"hpc/container/run/#srun","title":"\u4f7f\u7528 srun \u76f4\u63a5\u57f7\u884c\u5bb9\u5668","text":"<pre><code># \u4f7f\u7528 --container-image \u6307\u5b9a\u6620\u50cf\nsrun --container-image=nvcr.io/nvidia/pytorch:23.12-py3 \\\n     python train.py\n\n# \u4f7f\u7528\u5df2\u532f\u5165\u7684\u6620\u50cf\nsrun --container-image=./nvidia+pytorch+23.12-py3.sqsh \\\n     python train.py\n</code></pre>"},{"location":"hpc/container/run/#_19","title":"\u639b\u8f09\u76ee\u9304","text":"<pre><code>srun --container-image=nvcr.io/nvidia/pytorch:23.12-py3 \\\n     --container-mounts=/data:/data,/results:/output \\\n     python train.py --data /data --output /output\n</code></pre>"},{"location":"hpc/container/run/#slurm","title":"Slurm \u6279\u6b21\u5de5\u4f5c\u7bc4\u4f8b","text":"<pre><code>#!/bin/bash\n#SBATCH -J enroot_job\n#SBATCH -p gpu\n#SBATCH --gres=gpu:1\n#SBATCH -c 8\n#SBATCH --mem=32G\n#SBATCH -t 24:00:00\n#SBATCH -o logs/output_%j.txt\n#SBATCH -e logs/error_%j.txt\n\n# \u4f7f\u7528 Enroot \u57f7\u884c\u5bb9\u5668\nsrun --container-image=nvcr.io/nvidia/pytorch:23.12-py3 \\\n     --container-mounts=/data:/data,/results/${SLURM_JOB_ID}:/output \\\n     python train.py \\\n         --data /data \\\n         --output /output \\\n         --epochs 100 \\\n         --batch-size 64\n</code></pre>"},{"location":"hpc/container/run/#enroot_3","title":"Enroot \u9032\u968e\u529f\u80fd","text":""},{"location":"hpc/container/run/#_20","title":"\u5bb9\u5668\u5167\u5b89\u88dd\u5957\u4ef6","text":"<p>\u4f7f\u7528\u53ef\u5beb\u5165\u6a21\u5f0f\u5728\u5bb9\u5668\u5167\u5b89\u88dd\u984d\u5916\u5957\u4ef6\uff1a</p> <pre><code># \u5efa\u7acb\u53ef\u5beb\u5165\u7684\u5bb9\u5668\nenroot create --name pytorch-dev nvidia+pytorch+23.12-py3.sqsh\n\n# \u4ee5\u53ef\u5beb\u5165\u6a21\u5f0f\u555f\u52d5\nenroot start --rw pytorch-dev bash\n\n# \u5728\u5bb9\u5668\u5167\u5b89\u88dd\u5957\u4ef6\npip install additional-package\n\n# \u96e2\u958b\u5bb9\u5668\u5f8c\uff0c\u8b8a\u66f4\u6703\u88ab\u4fdd\u7559\n</code></pre>"},{"location":"hpc/container/run/#_21","title":"\u5bb9\u5668\u5feb\u7167","text":"<pre><code># \u5c07\u4fee\u6539\u904e\u7684\u5bb9\u5668\u532f\u51fa\u70ba\u65b0\u6620\u50cf\nenroot export -o pytorch-custom.sqsh pytorch-dev\n</code></pre>"},{"location":"hpc/container/run/#singularity-enroot","title":"\u9078\u64c7\u4f7f\u7528 Singularity \u6216 Enroot","text":""},{"location":"hpc/container/run/#singularity_2","title":"\u4f7f\u7528 Singularity \u7684\u60c5\u5883","text":"<ul> <li>\u9700\u8981\u53ef\u651c\u6027\uff0c\u5728\u4e0d\u540c\u7cfb\u7d71\u9593\u79fb\u52d5\u6620\u50cf\u6a94</li> <li>\u7fd2\u6163\u4f7f\u7528\u55ae\u4e00 .sif \u6a94\u6848</li> <li>\u4e0d\u9700\u8981\u983b\u7e41\u5efa\u7acb\u548c\u522a\u9664\u5bb9\u5668</li> <li>\u7c21\u55ae\u7684\u4e00\u6b21\u6027\u4efb\u52d9</li> </ul>"},{"location":"hpc/container/run/#enroot_4","title":"\u4f7f\u7528 Enroot \u7684\u60c5\u5883","text":"<ul> <li>\u5927\u91cf\u91cd\u8907\u57f7\u884c\u76f8\u540c\u7684\u5bb9\u5668</li> <li>\u9700\u8981\u8207 Slurm \u6df1\u5ea6\u6574\u5408</li> <li>\u9700\u8981\u66f4\u5feb\u7684\u555f\u52d5\u901f\u5ea6</li> <li>\u9700\u8981\u5728\u5bb9\u5668\u5167\u9032\u884c\u958b\u767c\u548c\u4fee\u6539</li> </ul>"},{"location":"hpc/container/run/#_22","title":"\u5e38\u898b\u4f7f\u7528\u6a21\u5f0f","text":""},{"location":"hpc/container/run/#_23","title":"\u8cc7\u6599\u79d1\u5b78\u5de5\u4f5c\u6d41\u7a0b","text":"<pre><code># 1. \u8cc7\u6599\u9810\u8655\u7406\uff08Singularity\uff09\nsingularity exec --bind /data:/data \\\n    pytorch.sif python preprocess.py\n\n# 2. \u6a21\u578b\u8a13\u7df4\uff08Enroot + Slurm\uff09\nsrun --container-image=pytorch.sqsh \\\n     --container-mounts=/data:/data \\\n     python train.py\n\n# 3. \u6a21\u578b\u8a55\u4f30\uff08Singularity\uff09\nsingularity exec --bind /data:/data,/models:/models \\\n    pytorch.sif python evaluate.py\n</code></pre>"},{"location":"hpc/container/run/#gpu_1","title":"\u591a GPU \u8a13\u7df4","text":""},{"location":"hpc/container/run/#singularity_3","title":"Singularity \u7248\u672c","text":"<pre><code>#!/bin/bash\n#SBATCH -p gpu\n#SBATCH --gres=gpu:4\n#SBATCH -c 32\n\nsingularity exec --nv pytorch.sif \\\n    python -m torch.distributed.launch \\\n    --nproc_per_node=4 \\\n    train.py\n</code></pre>"},{"location":"hpc/container/run/#enroot_5","title":"Enroot \u7248\u672c","text":"<pre><code>#!/bin/bash\n#SBATCH -p gpu\n#SBATCH --gres=gpu:4\n#SBATCH -c 32\n\nsrun --container-image=pytorch.sqsh \\\n     python -m torch.distributed.launch \\\n     --nproc_per_node=4 \\\n     train.py\n</code></pre>"},{"location":"hpc/container/run/#_24","title":"\u53c3\u6578\u6383\u63cf\uff08\u9663\u5217\u5de5\u4f5c\uff09","text":"<pre><code>#!/bin/bash\n#SBATCH -p gpu\n#SBATCH --gres=gpu:1\n#SBATCH --array=1-10\n\n# \u4f7f\u7528\u9663\u5217 ID \u4f5c\u70ba\u53c3\u6578\nLEARNING_RATE=$(awk \"NR==${SLURM_ARRAY_TASK_ID}\" learning_rates.txt)\n\nsingularity exec --nv pytorch.sif \\\n    python train.py --lr ${LEARNING_RATE}\n</code></pre>"},{"location":"hpc/container/run/#_25","title":"\u6548\u80fd\u6700\u4f73\u5316\u5efa\u8b70","text":""},{"location":"hpc/container/run/#1-io","title":"1. \u6e1b\u5c11\u6a94\u6848 I/O","text":"<pre><code># \u5c07\u8cc7\u6599\u8907\u88fd\u5230\u672c\u6a5f\u66ab\u5b58\u76ee\u9304\ncp -r /data/dataset ${TMPDIR}/\nsingularity exec --bind ${TMPDIR}:/data pytorch.sif python train.py\n</code></pre>"},{"location":"hpc/container/run/#2-cpu","title":"2. \u4f7f\u7528\u6b63\u78ba\u7684 CPU \u548c\u8a18\u61b6\u9ad4\u8a2d\u5b9a","text":"<pre><code># \u8a2d\u5b9a OpenMP \u57f7\u884c\u7dd2\u6578\u91cf\nexport OMP_NUM_THREADS=${SLURM_CPUS_PER_TASK}\nsingularity exec pytorch.sif python train.py\n</code></pre>"},{"location":"hpc/container/run/#3-gpu","title":"3. GPU \u8a18\u61b6\u9ad4\u7ba1\u7406","text":"<pre><code># \u9650\u5236 TensorFlow GPU \u8a18\u61b6\u9ad4\u6210\u9577\nsingularity exec --nv \\\n    --env TF_FORCE_GPU_ALLOW_GROWTH=true \\\n    tensorflow.sif python train.py\n</code></pre>"},{"location":"hpc/container/run/#_26","title":"\u5e38\u898b\u554f\u984c","text":"<p>Q: Singularity \u548c Enroot \u53ef\u4ee5\u6df7\u7528\u55ce\uff1f</p> <p>A: \u53ef\u4ee5\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u6620\u50cf\u6a94\u683c\u5f0f\u4e0d\u540c\u3002Singularity \u4f7f\u7528 .sif\uff0cEnroot \u4f7f\u7528 .sqsh\u3002\u53ef\u4ee5\u900f\u904e\u5404\u81ea\u7684\u5de5\u5177\u5f9e Docker \u6620\u50cf\u8f49\u63db\u3002</p> <p>Q: \u5bb9\u5668\u5167\u770b\u4e0d\u5230 GPU \u600e\u9ebc\u8fa6\uff1f</p> <p>A: - Singularity\uff1a\u78ba\u8a8d\u4f7f\u7528 <code>--nv</code> \u53c3\u6578 - Enroot/srun\uff1a\u81ea\u52d5\u652f\u63f4 GPU\uff0c\u6aa2\u67e5 Slurm \u7684 <code>--gres</code> \u8a2d\u5b9a</p> <p>Q: \u5982\u4f55\u5728\u5bb9\u5668\u5167\u4f7f\u7528\u4e3b\u6a5f\u7684\u6a94\u6848\uff1f</p> <p>A: - Singularity\uff1a\u4f7f\u7528 <code>--bind</code> \u639b\u8f09\u76ee\u9304 - Enroot\uff1a\u4f7f\u7528 <code>--mount</code> \u6216 srun \u7684 <code>--container-mounts</code></p> <p>Q: \u5bb9\u5668\u555f\u52d5\u5f88\u6162\u600e\u9ebc\u8fa6\uff1f</p> <p>A: - \u78ba\u8a8d\u6620\u50cf\u6a94\u5b58\u653e\u5728\u5feb\u901f\u7684\u5132\u5b58\u7cfb\u7d71\u4e0a - \u8003\u616e\u4f7f\u7528 Enroot\uff0c\u555f\u52d5\u901f\u5ea6\u901a\u5e38\u8f03\u5feb - \u907f\u514d\u5728\u7db2\u8def\u6a94\u6848\u7cfb\u7d71\u4e0a\u57f7\u884c</p> <p>Q: \u53ef\u4ee5\u5728\u5bb9\u5668\u5167\u5b89\u88dd\u984d\u5916\u7684\u5957\u4ef6\u55ce\uff1f</p> <p>A: - Singularity\uff1a\u5bb9\u5668\u662f\u552f\u8b80\u7684\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528 <code>pip install --user</code> - Enroot\uff1a\u53ef\u4ee5\u4f7f\u7528 <code>--rw</code> \u6a21\u5f0f\u4fee\u6539\u5bb9\u5668</p> <p>Q: \u5982\u4f55\u9664\u932f\u5bb9\u5668\u5167\u7684\u554f\u984c\uff1f</p> <p>A: 1. \u4f7f\u7528 shell \u6a21\u5f0f\u9032\u5165\u5bb9\u5668 2. \u6aa2\u67e5\u74b0\u5883\u8b8a\u6578\u548c\u8def\u5f91\u8a2d\u5b9a 3. \u78ba\u8a8d\u639b\u8f09\u7684\u76ee\u9304\u662f\u5426\u6b63\u78ba 4. \u67e5\u770b\u5bb9\u5668\u7684\u8f38\u51fa\u548c\u932f\u8aa4\u8a0a\u606f</p>"},{"location":"hpc/container/run/#_27","title":"\u6700\u4f73\u5be6\u8e10\u7e3d\u7d50","text":"<ol> <li>\u9078\u64c7\u5408\u9069\u7684\u5de5\u5177\uff1a\u7c21\u55ae\u4efb\u52d9\u7528 Singularity\uff0c\u5927\u898f\u6a21\u904b\u7b97\u7528 Enroot</li> <li>\u59a5\u5584\u7ba1\u7406\u6620\u50cf\u6a94\uff1a\u5b9a\u671f\u66f4\u65b0\u548c\u6e05\u7406\u4e0d\u9700\u8981\u7684\u6620\u50cf</li> <li>\u6b63\u78ba\u8a2d\u5b9a\u8cc7\u6e90\uff1aCPU\u3001\u8a18\u61b6\u9ad4\u3001GPU \u6839\u64da\u5be6\u969b\u9700\u6c42\u8a2d\u5b9a</li> <li>\u4f7f\u7528\u7d81\u5b9a\u639b\u8f09\uff1a\u907f\u514d\u8907\u88fd\u5927\u91cf\u8cc7\u6599\u5230\u5bb9\u5668\u5167</li> <li>\u74b0\u5883\u8b8a\u6578\u7ba1\u7406\uff1a\u5c07\u5e38\u7528\u8a2d\u5b9a\u5beb\u6210\u8173\u672c\u6216\u914d\u7f6e\u6a94</li> <li>\u8a18\u9304\u548c\u76e3\u63a7\uff1a\u4fdd\u5b58\u57f7\u884c\u8a18\u9304\uff0c\u76e3\u63a7\u8cc7\u6e90\u4f7f\u7528\u60c5\u6cc1</li> </ol>"},{"location":"hpc/container/run/#_28","title":"\u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>Singularity \u5b98\u65b9\u6587\u4ef6</li> <li>Enroot \u5b98\u65b9\u6587\u4ef6</li> <li>Pyxis (Slurm + Enroot)</li> <li>\u5bb9\u5668\u6700\u4f73\u5be6\u8e10\u6307\u5357</li> </ul>"},{"location":"hpc/registration/","title":"\u7533\u8acb\u6d41\u7a0b\u8aaa\u660e","text":"<p>\u7533\u8acb\u7cfb\u7d71\u7db2\u5740\uff1a https://hpcreg.nycu.edu.tw/</p>"},{"location":"en/404/","title":"404 \u2014 Page Not Found","text":"<p>Sorry, the page you requested does not exist or has been moved.</p> <p>Please check if the URL is correct, or return to the homepage:</p> <p>Return to Homepage</p> <p>For Chinese version, please visit \u7e41\u9ad4\u4e2d\u6587.</p>"},{"location":"en/","title":"Welcome to NYCU IT Service Center DocHub","text":"<p>Welcome to the National Yang Ming Chiao Tung University IT Service Center documentation hub, providing service guides, technical documentation, and FAQs.</p>"},{"location":"en/#quick-navigation","title":"Quick Navigation","text":""},{"location":"en/#service-guide","title":"\ud83d\udcda Service Guide","text":"<p>Learn about our services and how to use them.</p>"},{"location":"en/#technical-documentation","title":"\ud83d\udd27 Technical Documentation","text":"<p>In-depth technical information and implementation guides.</p>"},{"location":"en/#faq","title":"\u2753 FAQ","text":"<p>Frequently asked questions and solutions.</p>"},{"location":"en/#about-us","title":"\ud83d\udc65 About Us","text":"<p>Meet the IT Service Center team.</p>"},{"location":"en/#contact-us","title":"Contact Us","text":"<p>If you have any questions or suggestions, please contact us:</p> <ul> <li>\ud83d\udce7 Email: support@it.nycu.edu.tw</li> <li>\ud83c\udf10 Website: https://it.nycu.edu.tw</li> </ul>"},{"location":"en/accessibility/","title":"Website Accessibility Statement","text":"<p>This website is designed and developed in accordance with the Web Content Accessibility Guidelines (WCAG) 2.1 Level AA to ensure equal access to information for all users.</p>"},{"location":"en/accessibility/#accessibility-features","title":"Accessibility Features","text":""},{"location":"en/accessibility/#1-keyboard-navigation-support","title":"1. Keyboard Navigation Support","text":"<p>This website fully supports keyboard operation. You can use the following shortcuts:</p> <ul> <li>Tab: Move to the next interactive element</li> <li>Shift + Tab: Move to the previous interactive element</li> <li>Enter: Select or activate the current element</li> <li>Space: Scroll the page or check checkboxes</li> <li>Arrow Keys: Navigate through menus or lists</li> </ul>"},{"location":"en/accessibility/#2-skip-blocks","title":"2. Skip Blocks","text":"<p>The website provides a \"Skip to Main Content\" link, allowing keyboard and screen reader users to quickly bypass navigation areas and go directly to the main content.</p>"},{"location":"en/accessibility/#3-alternative-text","title":"3. Alternative Text","text":"<p>All images, icons, and multimedia content include appropriate alternative text descriptions to ensure screen reader users can understand the content.</p>"},{"location":"en/accessibility/#4-heading-structure","title":"4. Heading Structure","text":"<p>The website uses appropriate heading levels (H1 to H6) to create a clear content hierarchy for easy browsing and navigation.</p>"},{"location":"en/accessibility/#5-color-contrast","title":"5. Color Contrast","text":"<p>Text and background contrast ratios meet WCAG 2.1 AA standards: - Normal text: At least 4.5:1 - Large text: At least 3:1 - Graphical elements: At least 3:1</p>"},{"location":"en/accessibility/#6-dark-mode","title":"6. Dark Mode","text":"<p>A dark mode toggle is provided, allowing users to choose a comfortable reading mode based on their preferences.</p>"},{"location":"en/accessibility/#7-text-scaling","title":"7. Text Scaling","text":"<p>The website uses relative units, supporting browser text scaling (up to 200%) without affecting layout or functionality.</p>"},{"location":"en/accessibility/#8-form-labels","title":"8. Form Labels","text":"<p>All form fields have clear labels and additional assistance when necessary.</p>"},{"location":"en/accessibility/#9-error-messages","title":"9. Error Messages","text":"<p>Form validation errors provide clear error messages explaining the issue and how to correct it.</p>"},{"location":"en/accessibility/#10-language-identification","title":"10. Language Identification","text":"<p>The website correctly identifies the primary language (Traditional Chinese or English) and supports multilingual switching.</p>"},{"location":"en/accessibility/#screen-reader-compatibility","title":"Screen Reader Compatibility","text":"<p>This website has been tested with the following screen readers:</p> <ul> <li>NVDA (Windows)</li> <li>JAWS (Windows)</li> <li>VoiceOver (macOS/iOS)</li> <li>TalkBack (Android)</li> </ul>"},{"location":"en/accessibility/#reduced-motion","title":"Reduced Motion","text":"<p>The website respects user system preferences and automatically reduces or disables animations when \"reduce motion\" is detected.</p>"},{"location":"en/accessibility/#keyboard-focus-indicators","title":"Keyboard Focus Indicators","text":"<p>All interactive elements display clear visual indicators when they receive keyboard focus, ensuring users know their current position.</p>"},{"location":"en/accessibility/#report-accessibility-issues","title":"Report Accessibility Issues","text":"<p>If you encounter any accessibility issues while using this website or have suggestions for improvement, please contact us:</p> <ul> <li>Email: support@it.nycu.edu.tw</li> <li>Phone: (03) 571-2121</li> </ul> <p>We will address your report as soon as possible and continue to improve the website's accessibility.</p>"},{"location":"en/accessibility/#related-resources","title":"Related Resources","text":"<ul> <li>NCC Accessible Cyberspace</li> <li>Web Content Accessibility Guidelines (WCAG) 2.1</li> <li>Taiwan Accessibility Guidelines</li> </ul>"},{"location":"en/accessibility/#last-updated","title":"Last Updated","text":"<p>This statement was last updated: January 2025</p> <p>Commitment</p> <p>The IT Service Center of National Yang Ming Chiao Tung University is committed to ensuring the accessibility of digital content. We will continue to monitor and improve the website's accessibility features to provide equal access to information for all users.</p>"},{"location":"en/hpc/","title":"HPC Service Description","text":""},{"location":"en/hpc/#service-overview","title":"Service Overview","text":"<ul> <li>To promote the use of the HPC high-performance computing platform provided by the IT Center among on-campus research teams, we provide a secure and reliable computing service to assist research groups in AI and high-performance computing related research.</li> <li>The platform currently has 5 Nvidia DGX servers: two systems equipped with 8 H100 GPUs each, and three systems equipped with 8 H200 GPUs each.</li> <li>We offer both exclusive (reserved) and queued (shared) GPU services to meet different research needs and scheduling modes.</li> </ul>"},{"location":"en/hpc/#platform-specifications","title":"Platform Specifications","text":"GPU Model Type Number of GPU Cores GPU Memory H100 whole GPU 80GB H200 whole GPU 7 144GB H200 MIG-1g.18gb 1 18GB H200 MIG-2g.35gb 2 35GB <ul> <li>Additional services: HPC storage provides 1 TB of free space; beyond 1 TB, the charge is NT$2 per GB.</li> </ul>"},{"location":"en/hpc/#eligible-users","title":"Eligible Users","text":"<ul> <li>Faculty and researchers officially appointed by the university may apply; for other affiliations or collaborative projects please contact the IT Center or follow the official announcements.</li> </ul>"},{"location":"en/hpc/#how-to-apply-and-fees","title":"How to Apply and Fees","text":"<ul> <li>Please refer to the IT Center's charging standard page for application and fee details.</li> <li>New applications should be submitted via the HPC application system (https://hpcreg.nycu.edu.tw/) using the \"HPC New Application\" feature. Activation is usually completed within 3 working days (accounts may be temporarily activated before the principal investigator's approval). The principal investigator must complete approval within 7 working days; otherwise the account may be suspended and charges may be applied.</li> <li>Exclusive GPU service (reserved) is applied per day, with a minimum booking unit of 7 days; multiple units may be booked in one application.</li> </ul>"},{"location":"en/hpc/#billing-and-key-usage-rules","title":"Billing and Key Usage Rules","text":"<ul> <li>GPU usage is billed post-use. The system sends monthly payment notices; please complete payment by the end of the month. Accounts will be blocked from login if payment is overdue by one week, and accounts and data may be deleted after one month of non-payment.</li> <li>Queued (shared) service has a minimum resource usage requirement (for example, a minimum number of GPU hours per month). The system settles monthly and will take follow-up actions if usage does not meet the threshold\u2014please pay attention to official announcements.</li> <li>Users must comply with campus information security and intellectual property regulations. In case of serious information security incidents or policy violations, the Center may suspend the account service.</li> <li>The platform does not provide backup for user data; users are responsible for backing up important data themselves.</li> </ul>"},{"location":"en/hpc/#usage-notes","title":"Usage Notes","text":"<ul> <li>Account access is restricted by IP. According to information security rules, each account may set two allowed IP ranges.</li> <li>To encourage research teams, first-time applicants may enjoy a free usage promotional period for the first month (subject to the IT Center's latest announcements).</li> <li>For H100, the maximum TimeLimit per job is 7 days; for H200, the maximum TimeLimit per job is 2 days.</li> <li>Before submitting jobs, please confirm that your scripts and resource settings (CPU, Memory, GPU, TimeLimit) are correct to avoid jobs being scheduled or cancelled while resources continue to be billed.</li> </ul>"},{"location":"en/hpc/#contact-information","title":"Contact Information","text":"<p>Contact person: Ming-Hong Yen (\u9122\u9298\u5b8f), Extension: 31724 Email: hpc@nycu.edu.tw</p>"}]}